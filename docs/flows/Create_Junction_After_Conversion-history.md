# Create_Junction_After_Conversion history

<!-- This page has been generated to be viewed with mkdocs-material, you can not view it just as markdown . Activate tab plugin following the doc at https://squidfunk.github.io/mkdocs-material/reference/content-tabs/ -->

=== "Nov 10, 2025 (Initial)"

    _Nov 10, 2025, by moechapa in commit Org state on 2025-11-11 02:14 for monitoring_myubiquity [skip ci]_

    
    ## Flow Diagram [(_View History_)](Create_Junction_After_Conversion-history.md)
    
    ```mermaid
    %% If you read this, your Markdown visualizer does not handle MermaidJS syntax.
    %% - If you are in VS Code, install extension `Markdown Preview Mermaid Support` at https://marketplace.visualstudio.com/items?itemName=bierner.markdown-mermaid
    %% - If you are using sfdx-hardis, try to define env variable `MERMAID_MODES=cli,docker` ,then run again the command to regenerate markdown with SVG images.
    %% - If you are within mkdocs-material, define mermaid plugin in `mkdocs.yml` as described in https://squidfunk.github.io/mkdocs-material/extensions/mermaid/
    %% - As a last resort, you can copy-paste this MermaidJS code into https://mermaid.live/ to see the flow diagram
    
    flowchart TB
    START(["START<br/><b>AutoLaunched Flow</b></br>"]):::startClass
    click START "#general-information" "4155919271"
    
    Add_additional_AC_to_collection[\"üü∞ <em></em><br/>Add additional AC to collection"/]:::assignments
    click Add_additional_AC_to_collection "#add_additional_ac_to_collection" "1148785936"
    
    Add_advisor_to_collections[\"üü∞ <em></em><br/>Add advisor to collections"/]:::assignments
    click Add_advisor_to_collections "#add_advisor_to_collections" "3745221489"
    
    Add_email_to_collection[\"üü∞ <em></em><br/>Add email to collection"/]:::assignments
    click Add_email_to_collection "#add_email_to_collection" "1595189486"
    
    Add_final_email[\"üü∞ <em></em><br/>Add final email"/]:::assignments
    click Add_final_email "#add_final_email" "862096269"
    
    Add_referring_contact_to_collection[\"üü∞ <em></em><br/>Add referring contact to collection"/]:::assignments
    click Add_referring_contact_to_collection "#add_referring_contact_to_collection" "2682005373"
    
    add_referring_partner_to_collection[\"üü∞ <em></em><br/>add referring partner to collection"/]:::assignments
    click add_referring_partner_to_collection "#add_referring_partner_to_collection" "3344800085"
    
    Add_to_AC_Collection[\"üü∞ <em></em><br/>Add to AC Collection"/]:::assignments
    click Add_to_AC_Collection "#add_to_ac_collection" "2156478035"
    
    Add_tpa_to_collections[\"üü∞ <em></em><br/>Add tpa to collections"/]:::assignments
    click Add_tpa_to_collections "#add_tpa_to_collections" "334515963"
    
    Assign_ac_role_from_lead[\"üü∞ <em></em><br/>Assign ac role from lead"/]:::assignments
    click Assign_ac_role_from_lead "#assign_ac_role_from_lead" "4139744140"
    
    Assign_additional_advisor_AC_values[\"üü∞ <em></em><br/>Assign additional advisor AC values"/]:::assignments
    click Assign_additional_advisor_AC_values "#assign_additional_advisor_ac_values" "1247303236"
    
    Assign_advisor_AC_values[\"üü∞ <em></em><br/>Assign advisor AC values"/]:::assignments
    click Assign_advisor_AC_values "#assign_advisor_ac_values" "3395357136"
    
    Assign_Advisor_AP_values[\"üü∞ <em></em><br/>Assign Advisor AP values"/]:::assignments
    click Assign_Advisor_AP_values "#assign_advisor_ap_values" "1603945769"
    
    Assign_ap_role_from_lead[\"üü∞ <em></em><br/>Assign ap role from lead"/]:::assignments
    click Assign_ap_role_from_lead "#assign_ap_role_from_lead" "4016365381"
    
    Assign_generic_ac_referrer_role[\"üü∞ <em></em><br/>Assign generic ac referrer role"/]:::assignments
    click Assign_generic_ac_referrer_role "#assign_generic_ac_referrer_role" "2015157750"
    
    Assign_generic_ap_referrer_role[\"üü∞ <em></em><br/>Assign generic ap referrer role"/]:::assignments
    click Assign_generic_ap_referrer_role "#assign_generic_ap_referrer_role" "3986867307"
    
    Assign_referring_contact[\"üü∞ <em></em><br/>Assign referring contact"/]:::assignments
    click Assign_referring_contact "#assign_referring_contact" "2672336397"
    
    Assign_referring_partner[\"üü∞ <em></em><br/>Assign referring partner"/]:::assignments
    click Assign_referring_partner "#assign_referring_partner" "3650077312"
    
    Assign_TPA_AC_values[\"üü∞ <em></em><br/>Assign TPA AC values"/]:::assignments
    click Assign_TPA_AC_values "#assign_tpa_ac_values" "1852186964"
    
    Assign_TPA_AP_values[\"üü∞ <em></em><br/>Assign TPA AP values"/]:::assignments
    click Assign_TPA_AP_values "#assign_tpa_ap_values" "1614388975"
    
    Connect_proposal_to_opp[\"üü∞ <em></em><br/>Connect proposal to opp"/]:::assignments
    click Connect_proposal_to_opp "#connect_proposal_to_opp" "1176130754"
    
    Converted_Contact_AC[\"üü∞ <em></em><br/>Converted Contact AC"/]:::assignments
    click Converted_Contact_AC "#converted_contact_ac" "751478326"
    
    Copy_1_of_Wipe_Association_values[\"üü∞ <em></em><br/>Copy 1 of Wipe Association values"/]:::assignments
    click Copy_1_of_Wipe_Association_values "#copy_1_of_wipe_association_values" "3970955329"
    
    LSD_ADV[\"üü∞ <em></em><br/>LSD = ADV"/]:::assignments
    click LSD_ADV "#lsd_adv" "2131760330"
    
    LSD_DIR[\"üü∞ <em></em><br/>LSD = DIR"/]:::assignments
    click LSD_DIR "#lsd_dir" "394018171"
    
    LSD_TPA[\"üü∞ <em></em><br/>LSD = TPA"/]:::assignments
    click LSD_TPA "#lsd_tpa" "2333720829"
    
    LSD_Value_on_Proposal[\"üü∞ <em></em><br/>LSD = Value on Proposal"/]:::assignments
    click LSD_Value_on_Proposal "#lsd_value_on_proposal" "100877747"
    
    Raise_advisor_contact_dupe_flag[\"üü∞ <em></em><br/>Raise advisor contact dupe flag"/]:::assignments
    click Raise_advisor_contact_dupe_flag "#raise_advisor_contact_dupe_flag" "491512326"
    
    Raise_advisor_partner_dupe_flag[\"üü∞ <em></em><br/>Raise advisor partner dupe flag"/]:::assignments
    click Raise_advisor_partner_dupe_flag "#raise_advisor_partner_dupe_flag" "1491162132"
    
    Raise_contact_and_partner_dupe_flags[\"üü∞ <em></em><br/>Raise contact and partner dupe flags"/]:::assignments
    click Raise_contact_and_partner_dupe_flags "#raise_contact_and_partner_dupe_flags" "3414547119"
    
    Raise_tpa_contact_and_partner_dupe_flags[\"üü∞ <em></em><br/>Raise tpa contact and partner dupe flags"/]:::assignments
    click Raise_tpa_contact_and_partner_dupe_flags "#raise_tpa_contact_and_partner_dupe_flags" "1142299567"
    
    raise_tpa_contact_dupe_flag[\"üü∞ <em></em><br/>raise tpa contact dupe flag"/]:::assignments
    click raise_tpa_contact_dupe_flag "#raise_tpa_contact_dupe_flag" "2168901531"
    
    raise_tpa_partner_dupe_flag[\"üü∞ <em></em><br/>raise tpa partner dupe flag"/]:::assignments
    click raise_tpa_partner_dupe_flag "#raise_tpa_partner_dupe_flag" "1877374688"
    
    Remove_Leftmost_Email[\"üü∞ <em></em><br/>Remove Leftmost Email"/]:::assignments
    click Remove_Leftmost_Email "#remove_leftmost_email" "300723731"
    
    Wipe_AC_Values[\"üü∞ <em></em><br/>Wipe AC Values"/]:::assignments
    click Wipe_AC_Values "#wipe_ac_values" "26944214"
    
    Wipe_Association_values[\"üü∞ <em></em><br/>Wipe Association values"/]:::assignments
    click Wipe_Association_values "#wipe_association_values" "3536140433"
    
    Additional_contacts_found_check{"üîÄ <em></em><br/>Additional contacts found check"}:::decisions
    click Additional_contacts_found_check "#additional_contacts_found_check" "1846516542"
    
    Additional_FP_email_parse{"üîÄ <em></em><br/>Additional FP email parse"}:::decisions
    click Additional_FP_email_parse "#additional_fp_email_parse" "224960811"
    
    Check_for_referring_contact{"üîÄ <em></em><br/>Check for referring contact"}:::decisions
    click Check_for_referring_contact "#check_for_referring_contact" "2851389204"
    
    Check_for_referring_partner{"üîÄ <em></em><br/>Check for referring partner"}:::decisions
    click Check_for_referring_partner "#check_for_referring_partner" "403499893"
    
    Check_if_advisor_value_s_match_lead_fields{"üîÄ <em></em><br/>Check if advisor value(s) match lead fields"}:::decisions
    click Check_if_advisor_value_s_match_lead_fields "#check_if_advisor_value_s_match_lead_fields" "451252991"
    
    Check_if_tpa_value_s_match_lead_fields{"üîÄ <em></em><br/>Check if tpa value(s) match lead fields"}:::decisions
    click Check_if_tpa_value_s_match_lead_fields "#check_if_tpa_value_s_match_lead_fields" "1555548874"
    
    Contact_role_check{"üîÄ <em></em><br/>Contact role check"}:::decisions
    click Contact_role_check "#contact_role_check" "423199255"
    
    is_Advisor_Present{"üîÄ <em></em><br/>is Advisor Present?"}:::decisions
    click is_Advisor_Present "#is_advisor_present" "1286939908"
    
    Is_an_Opp_present{"üîÄ <em></em><br/>Is an Opp present?"}:::decisions
    click Is_an_Opp_present "#is_an_opp_present" "1971408506"
    
    Is_TPA_Present{"üîÄ <em></em><br/>Is TPA Present?"}:::decisions
    click Is_TPA_Present "#is_tpa_present" "1130798678"
    
    Partner_Role_Check{"üîÄ <em></em><br/>Partner Role Check"}:::decisions
    click Partner_Role_Check "#partner_role_check" "1419647573"
    
    Partners_to_create_check{"üîÄ <em></em><br/>Partners to create check"}:::decisions
    click Partners_to_create_check "#partners_to_create_check" "125213229"
    
    Proposal_partner_check{"üîÄ <em></em><br/>Proposal partner check"}:::decisions
    click Proposal_partner_check "#proposal_partner_check" "2199341691"
    
    Proposal_Present{"üîÄ <em></em><br/>Proposal Present?"}:::decisions
    click Proposal_Present "#proposal_present" "49716265"
    
    Referrer_Type_Validation{"üîÄ <em></em><br/>Referrer Type Validation"}:::decisions
    click Referrer_Type_Validation "#referrer_type_validation" "740089335"
    
    Secondary_Advisor_Check{"üîÄ <em></em><br/>Secondary Advisor Check"}:::decisions
    click Secondary_Advisor_Check "#secondary_advisor_check" "2503529061"
    
    Additional_Contact_Loop{{"üîÅ <em></em><br/>Additional Contact Loop"}}:::loops
    click Additional_Contact_Loop "#additional_contact_loop" "2033684169"
    
    Create_Associated_Contacts[("‚ûï <em></em><br/>Create Associated Contacts")]:::recordCreates
    click Create_Associated_Contacts "#create_associated_contacts" "3947532543"
    
    Create_Associated_Partners[("‚ûï <em></em><br/>Create Associated Partners")]:::recordCreates
    click Create_Associated_Partners "#create_associated_partners" "1693371479"
    
    Find_additional_advisor_contacts[("üîç <em></em><br/>Find additional advisor contacts")]:::recordLookups
    click Find_additional_advisor_contacts "#find_additional_advisor_contacts" "2977439104"
    
    Get_Proposal[("üîç <em></em><br/>Get Proposal")]:::recordLookups
    click Get_Proposal "#get_proposal" "4235049369"
    
    Update_Opportunity_0_0_0[("üõ†Ô∏è <em></em><br/>Update Opportunity")]:::recordUpdates
    click Update_Opportunity_0_0_0 "#update_opportunity_0_0_0" "222767671"
    
    Update_Proposal[("üõ†Ô∏è <em></em><br/>Update Proposal")]:::recordUpdates
    click Update_Proposal "#update_proposal" "1444744290"
    
    Add_additional_AC_to_collection --> Additional_Contact_Loop
    Add_advisor_to_collections --> Check_if_advisor_value_s_match_lead_fields
    Add_email_to_collection --> Remove_Leftmost_Email
    Add_final_email --> Find_additional_advisor_contacts
    Add_referring_contact_to_collection --> Check_for_referring_partner
    add_referring_partner_to_collection --> Create_Associated_Contacts
    Add_to_AC_Collection --> Check_for_referring_contact
    Add_tpa_to_collections --> Check_if_tpa_value_s_match_lead_fields
    Assign_ac_role_from_lead --> Add_referring_contact_to_collection
    Assign_additional_advisor_AC_values --> Add_additional_AC_to_collection
    Assign_advisor_AC_values --> Assign_Advisor_AP_values
    Assign_Advisor_AP_values --> Add_advisor_to_collections
    Assign_ap_role_from_lead --> add_referring_partner_to_collection
    Assign_generic_ac_referrer_role --> Add_referring_contact_to_collection
    Assign_generic_ap_referrer_role --> add_referring_partner_to_collection
    Assign_referring_contact --> Contact_role_check
    Assign_referring_partner --> Partner_Role_Check
    Assign_TPA_AC_values --> Assign_TPA_AP_values
    Assign_TPA_AP_values --> Add_tpa_to_collections
    Connect_proposal_to_opp --> Update_Proposal
    Converted_Contact_AC --> Add_to_AC_Collection
    Copy_1_of_Wipe_Association_values --> Proposal_partner_check
    LSD_ADV --> Update_Opportunity_0_0_0
    LSD_DIR --> Update_Opportunity_0_0_0
    LSD_TPA --> Update_Opportunity_0_0_0
    LSD_Value_on_Proposal --> Update_Opportunity_0_0_0
    Raise_advisor_contact_dupe_flag --> Wipe_Association_values
    Raise_advisor_partner_dupe_flag --> Wipe_Association_values
    Raise_contact_and_partner_dupe_flags --> Wipe_Association_values
    Raise_tpa_contact_and_partner_dupe_flags --> Copy_1_of_Wipe_Association_values
    raise_tpa_contact_dupe_flag --> Copy_1_of_Wipe_Association_values
    raise_tpa_partner_dupe_flag --> Copy_1_of_Wipe_Association_values
    Remove_Leftmost_Email --> Additional_FP_email_parse
    Wipe_AC_Values --> Is_TPA_Present
    Wipe_Association_values --> Secondary_Advisor_Check
    Additional_contacts_found_check --> |"Additional advisors found"| Additional_Contact_Loop
    Additional_contacts_found_check --> |"Default Outcome"| Is_TPA_Present
    Additional_FP_email_parse --> |"Multiple Remaining Emails"| Add_email_to_collection
    Additional_FP_email_parse --> |"Last One"| Add_final_email
    Check_for_referring_contact --> |"Referring contact Present"| Assign_referring_contact
    Check_for_referring_contact --> |"Default Outcome"| Check_for_referring_partner
    Check_for_referring_partner --> |"Referring partner present"| Assign_referring_partner
    Check_for_referring_partner --> |"Default Outcome"| Create_Associated_Contacts
    Check_if_advisor_value_s_match_lead_fields --> |"advisor contact and partner match"| Raise_contact_and_partner_dupe_flags
    Check_if_advisor_value_s_match_lead_fields --> |"advisor contact match"| Raise_advisor_contact_dupe_flag
    Check_if_advisor_value_s_match_lead_fields --> |"advisor partner match"| Raise_advisor_partner_dupe_flag
    Check_if_advisor_value_s_match_lead_fields --> |"Default Outcome"| Wipe_Association_values
    Check_if_tpa_value_s_match_lead_fields --> |"tpa contact and partner match"| Raise_tpa_contact_and_partner_dupe_flags
    Check_if_tpa_value_s_match_lead_fields --> |"tpa contact match"| raise_tpa_contact_dupe_flag
    Check_if_tpa_value_s_match_lead_fields --> |"tpa partner match"| raise_tpa_partner_dupe_flag
    Check_if_tpa_value_s_match_lead_fields --> |"Default Outcome"| Copy_1_of_Wipe_Association_values
    Contact_role_check --> |"Has ac role on lead"| Assign_ac_role_from_lead
    Contact_role_check --> |"Default Outcome"| Assign_generic_ac_referrer_role
    is_Advisor_Present --> |"Advisor spotted"| Assign_advisor_AC_values
    is_Advisor_Present --> |"Default Outcome"| Is_TPA_Present
    Is_an_Opp_present --> |"Yes"| Get_Proposal
    Is_TPA_Present --> |"TPA Present"| Assign_TPA_AC_values
    Is_TPA_Present --> |"TPA Not Present"| Proposal_partner_check
    Partner_Role_Check --> |"has ap role on lead"| Assign_ap_role_from_lead
    Partner_Role_Check --> |"Default Outcome"| Assign_generic_ap_referrer_role
    Partners_to_create_check --> |"need 2 create partners"| Create_Associated_Partners
    Partners_to_create_check --> |"Default Outcome"| END_Partners_to_create_check
    Proposal_partner_check --> |"Simply path"| Referrer_Type_Validation
    Proposal_partner_check --> |"Default Outcome"| Converted_Contact_AC
    Proposal_Present --> |"Proposal Found"| Connect_proposal_to_opp
    Proposal_Present --> |"Proposal Not Found"| Converted_Contact_AC
    Referrer_Type_Validation --> |"Special Case"| LSD_Value_on_Proposal
    Referrer_Type_Validation --> |"TPA Referred"| LSD_TPA
    Referrer_Type_Validation --> |"Advisor Referred"| LSD_ADV
    Referrer_Type_Validation --> |"Default Outcome"| LSD_DIR
    Secondary_Advisor_Check --> |"Additional FP emails present"| Additional_FP_email_parse
    Secondary_Advisor_Check --> |"Default Outcome"| Find_additional_advisor_contacts
    Additional_Contact_Loop --> |"For Each"|Assign_additional_advisor_AC_values
    Additional_Contact_Loop ---> |"After Last"|Wipe_AC_Values
    Create_Associated_Contacts --> Partners_to_create_check
    Create_Associated_Partners --> END_Create_Associated_Partners
    Find_additional_advisor_contacts --> Additional_contacts_found_check
    Get_Proposal --> Proposal_Present
    Update_Opportunity_0_0_0 --> Converted_Contact_AC
    Update_Proposal --> is_Advisor_Present
    START -->  Is_an_Opp_present
    END_Partners_to_create_check(( END )):::endClass
    END_Create_Associated_Partners(( END )):::endClass
    
    
    classDef actionCalls fill:#D4E4FC,color:black,text-decoration:none,max-height:100px
    classDef assignments fill:#FBEED7,color:black,text-decoration:none,max-height:100px
    classDef collectionProcessors fill:#F0E3FA,color:black,text-decoration:none,max-height:100px
    classDef customErrors fill:#FFE9E9,color:black,text-decoration:none,max-height:100px
    classDef decisions fill:#FDEAF6,color:black,text-decoration:none,max-height:100px
    classDef loops fill:#FDEAF6,color:black,text-decoration:none,max-height:100px
    classDef recordCreates fill:#FFF8C9,color:black,text-decoration:none,max-height:100px
    classDef recordDeletes fill:#FFF8C9,color:black,text-decoration:none,max-height:100px
    classDef recordLookups fill:#EDEAFF,color:black,text-decoration:none,max-height:100px
    classDef recordUpdates fill:#FFF8C9,color:black,text-decoration:none,max-height:100px
    classDef screens fill:#DFF6FF,color:black,text-decoration:none,max-height:100px
    classDef subflows fill:#D4E4FC,color:black,text-decoration:none,max-height:100px
    classDef startClass fill:#D9F2E6,color:black,text-decoration:none,max-height:100px
    classDef endClass fill:#F9BABA,color:black,text-decoration:none,max-height:100px
    classDef transforms fill:#FDEAF6,color:black,text-decoration:none,max-height:100px
    
    
    ```
    
    <!-- Flow description -->
    
    ## General Information
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Process Type| Auto Launched Flow|
    |Label|Lead | Process | Create Contact Junction|
    |Status|Active|
    |Description|Updated to use ac and ap roles from lead on new ac and ap records (rather than defaulting to "referrer" generic values)<br/><br/>Creates Associated Contact Junction if needed when Lead is Converted|
    |Environments|Default|
    |Interview Label|Create Junction After Conversion {!$Flow.CurrentDateTime}|
    | Builder Type (PM)|LightningFlowBuilder|
    | Canvas Mode (PM)|AUTO_LAYOUT_CANVAS|
    | Origin Builder Type (PM)|LightningFlowBuilder|
    |Connector|[Is_an_Opp_present](#is_an_opp_present)|
    |Next Node|[Is_an_Opp_present](#is_an_opp_present)|
    
    
    ## Variables
    
    |Name|Data Type|Is Collection|Is Input|Is Output|Object Type|Description|
    |:-- |:--:|:--:|:--:|:--:|:--:|:--  |
    |acCollection|SObject|‚úÖ|‚¨ú|‚¨ú|Associated_Contact__c|<!-- -->|
    |acDupe|Boolean|‚¨ú|‚¨ú|‚¨ú|<!-- -->|<!-- -->|
    |additionalEmailSearchCollection|String|‚úÖ|‚¨ú|‚¨ú|<!-- -->|<!-- -->|
    |apCollection|SObject|‚úÖ|‚¨ú|‚¨ú|Associated_Partner__c|<!-- -->|
    |apDupe|Boolean|‚¨ú|‚¨ú|‚¨ú|<!-- -->|<!-- -->|
    |associatedContact|SObject|‚¨ú|‚¨ú|‚¨ú|Associated_Contact__c|<!-- -->|
    |associatedPartner|SObject|‚¨ú|‚¨ú|‚¨ú|Associated_Partner__c|<!-- -->|
    |emailFieldRaw|String|‚¨ú|‚¨ú|‚¨ú|<!-- -->|Raw Additional FP email field value|
    |leadInput|SObject|‚¨ú|‚úÖ|‚¨ú|Lead|<!-- -->|
    |LeadSourceDetail|String|‚¨ú|‚¨ú|‚¨ú|<!-- -->|<!-- -->|
    |proposal|SObject|‚¨ú|‚¨ú|‚¨ú|Proposal__c|<!-- -->|
    
    
    ## Formulas
    
    |Name|Data Type|Expression|Description|
    |:-- |:--:|:-- |:--  |
    |emailFieldLeftmostRemoved|String|SUBSTITUTE({!emailFieldRaw}, {!leftmostEmail}+",", "")|Removes first email for next parse|
    |leftmostEmail|String|LEFT({!emailFieldRaw},FIND(",", {!emailFieldRaw})-1)|<!-- -->|
    
    
    ## Flow Nodes Details
    
    ### Add_additional_AC_to_collection
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Add additional AC to collection|
    |Connector|[Additional_Contact_Loop](#additional_contact_loop)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |acCollection| Add|associatedContact|
    
    
    
    
    ### Add_advisor_to_collections
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Add advisor to collections|
    |Connector|[Check_if_advisor_value_s_match_lead_fields](#check_if_advisor_value_s_match_lead_fields)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |apCollection| Add|associatedPartner|
    |acCollection| Add|associatedContact|
    
    
    
    
    ### Add_email_to_collection
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Add email to collection|
    |Connector|[Remove_Leftmost_Email](#remove_leftmost_email)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |additionalEmailSearchCollection| Add|leftmostEmail|
    
    
    
    
    ### Add_final_email
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Add final email|
    |Connector|[Find_additional_advisor_contacts](#find_additional_advisor_contacts)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |additionalEmailSearchCollection| Add|emailFieldRaw|
    
    
    
    
    ### Add_referring_contact_to_collection
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Add referring contact to collection|
    |Connector|[Check_for_referring_partner](#check_for_referring_partner)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |acCollection| Add|associatedContact|
    |associatedContact| Assign|<!-- -->|
    
    
    
    
    ### add_referring_partner_to_collection
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|add referring partner to collection|
    |Connector|[Create_Associated_Contacts](#create_associated_contacts)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |apCollection| Add|associatedPartner|
    |associatedPartner| Assign|<!-- -->|
    
    
    
    
    ### Add_to_AC_Collection
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Add to AC Collection|
    |Connector|[Check_for_referring_contact](#check_for_referring_contact)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |acCollection| Add|associatedContact|
    |associatedContact| Assign|<!-- -->|
    
    
    
    
    ### Add_tpa_to_collections
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Add tpa to collections|
    |Connector|[Check_if_tpa_value_s_match_lead_fields](#check_if_tpa_value_s_match_lead_fields)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |apCollection| Add|associatedPartner|
    |acCollection| Add|associatedContact|
    
    
    
    
    ### Assign_ac_role_from_lead
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign ac role from lead|
    |Connector|[Add_referring_contact_to_collection](#add_referring_contact_to_collection)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedContact.Contact_Role__c| Assign|leadInput.Associated_Contact_Role__c|
    
    
    
    
    ### Assign_additional_advisor_AC_values
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign additional advisor AC values|
    |Connector|[Add_additional_AC_to_collection](#add_additional_ac_to_collection)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedContact.Account__c| Assign|proposal.Advisor_Account__c|
    |associatedContact.Business_Unit__c| Assign|leadInput.Business_Unit__c|
    |associatedContact.Contact_Role__c| Assign|Financial Advisor|
    |associatedContact.Contact__c| Assign|Additional_Contact_Loop.Id|
    |associatedContact.Opportunity__c| Assign|leadInput.ConvertedOpportunityId|
    
    
    
    
    ### Assign_advisor_AC_values
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign advisor AC values|
    |Connector|[Assign_Advisor_AP_values](#assign_advisor_ap_values)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedContact.Account__c| Assign|proposal.Advisor_Account__c|
    |associatedContact.Business_Unit__c| Assign|leadInput.Business_Unit__c|
    |associatedContact.Contact_Role__c| Assign|Financial Advisor|
    |associatedContact.Contact__c| Assign|proposal.Advisor_Contact__c|
    |associatedContact.Opportunity__c| Assign|leadInput.ConvertedOpportunityId|
    
    
    
    
    ### Assign_Advisor_AP_values
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign Advisor AP values|
    |Connector|[Add_advisor_to_collections](#add_advisor_to_collections)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedPartner.Partner_Role__c| Assign|Financial Advisory Firm|
    |associatedPartner.Account__c| Assign|proposal.Advisor_Account__c|
    |associatedPartner.Opportunity__c| Assign|leadInput.ConvertedOpportunityId|
    
    
    
    
    ### Assign_ap_role_from_lead
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign ap role from lead|
    |Connector|[add_referring_partner_to_collection](#add_referring_partner_to_collection)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedPartner.Partner_Role__c| Assign|leadInput.Associated_Partner_Role__c|
    
    
    
    
    ### Assign_generic_ac_referrer_role
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign generic ac referrer role|
    |Connector|[Add_referring_contact_to_collection](#add_referring_contact_to_collection)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedContact.Contact_Role__c| Assign|Referrer|
    
    
    
    
    ### Assign_generic_ap_referrer_role
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign generic ap referrer role|
    |Connector|[add_referring_partner_to_collection](#add_referring_partner_to_collection)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedPartner.Partner_Role__c| Assign|Referring Partner|
    
    
    
    
    ### Assign_referring_contact
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign referring contact|
    |Connector|[Contact_role_check](#contact_role_check)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedContact.Account__c| Assign|leadInput.Associated_Contact__r.AccountId|
    |associatedContact.Contact__c| Assign|leadInput.Associated_Contact__c|
    |associatedContact.Business_Unit__c| Assign|leadInput.Business_Unit__c|
    |associatedContact.Opportunity__c| Assign|leadInput.ConvertedOpportunityId|
    
    
    
    
    ### Assign_referring_partner
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign referring partner|
    |Connector|[Partner_Role_Check](#partner_role_check)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedPartner.Account__c| Assign|leadInput.Associated_Partner__c|
    |associatedPartner.Opportunity__c| Assign|leadInput.ConvertedOpportunityId|
    |associatedPartner.Primary_Partner__c| Assign|‚úÖ|
    
    
    
    
    ### Assign_TPA_AC_values
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign TPA AC values|
    |Connector|[Assign_TPA_AP_values](#assign_tpa_ap_values)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedContact.Account__c| Assign|proposal.TPA_Account__c|
    |associatedContact.Business_Unit__c| Assign|leadInput.Business_Unit__c|
    |associatedContact.Contact_Role__c| Assign|proposal.TPA_Contact__r.Role__c|
    |associatedContact.Contact__c| Assign|proposal.TPA_Contact__c|
    |associatedContact.Opportunity__c| Assign|leadInput.ConvertedOpportunityId|
    
    
    
    
    ### Assign_TPA_AP_values
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Assign TPA AP values|
    |Connector|[Add_tpa_to_collections](#add_tpa_to_collections)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedPartner.Partner_Role__c| Assign|TPA|
    |associatedPartner.Account__c| Assign|proposal.TPA_Account__c|
    |associatedPartner.Opportunity__c| Assign|leadInput.ConvertedOpportunityId|
    
    
    
    
    ### Connect_proposal_to_opp
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Connect proposal to opp|
    |Connector|[Update_Proposal](#update_proposal)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |proposal.Opportunity__c| Assign|leadInput.ConvertedOpportunityId|
    
    
    
    
    ### Converted_Contact_AC
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Converted Contact AC|
    |Connector|[Add_to_AC_Collection](#add_to_ac_collection)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedContact.Account__c| Assign|leadInput.ConvertedAccountId|
    |associatedContact.Business_Unit__c| Assign|leadInput.Business_Unit__c|
    |associatedContact.Contact_Role__c| Assign|Authorized Buyer|
    |associatedContact.Contact__c| Assign|leadInput.ConvertedContactId|
    |associatedContact.Opportunity__c| Assign|leadInput.ConvertedOpportunityId|
    |associatedContact.Primary__c| Assign|‚úÖ|
    
    
    
    
    ### Copy_1_of_Wipe_Association_values
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Copy 1 of Wipe Association values|
    |Connector|[Proposal_partner_check](#proposal_partner_check)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedContact| Assign|<!-- -->|
    |associatedPartner| Assign|<!-- -->|
    
    
    
    
    ### LSD_ADV
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|LSD = ADV|
    |Connector|[Update_Opportunity_0_0_0](#update_opportunity_0_0_0)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |LeadSourceDetail| Assign|Simply Advisor|
    
    
    
    
    ### LSD_DIR
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|LSD = DIR|
    |Connector|[Update_Opportunity_0_0_0](#update_opportunity_0_0_0)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |LeadSourceDetail| Assign|Simply Direct|
    
    
    
    
    ### LSD_TPA
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|LSD = TPA|
    |Connector|[Update_Opportunity_0_0_0](#update_opportunity_0_0_0)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |LeadSourceDetail| Assign|Simply TPA|
    
    
    
    
    ### LSD_Value_on_Proposal
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|LSD = Value on Proposal|
    |Description|Some proposals, namely Leafhouse / SRP, have the lead source detail set on the proposal.  When this is the case, it overrides the default 3 for simply.|
    |Connector|[Update_Opportunity_0_0_0](#update_opportunity_0_0_0)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |LeadSourceDetail| Assign|proposal.Lead_Source_Detail__c|
    
    
    
    
    ### Raise_advisor_contact_dupe_flag
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Raise advisor contact dupe flag|
    |Connector|[Wipe_Association_values](#wipe_association_values)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |acDupe| Assign|‚úÖ|
    
    
    
    
    ### Raise_advisor_partner_dupe_flag
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Raise advisor partner dupe flag|
    |Connector|[Wipe_Association_values](#wipe_association_values)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |apDupe| Assign|‚úÖ|
    
    
    
    
    ### Raise_contact_and_partner_dupe_flags
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Raise contact and partner dupe flags|
    |Connector|[Wipe_Association_values](#wipe_association_values)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |acDupe| Assign|‚úÖ|
    |apDupe| Assign|‚úÖ|
    
    
    
    
    ### Raise_tpa_contact_and_partner_dupe_flags
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Raise tpa contact and partner dupe flags|
    |Connector|[Copy_1_of_Wipe_Association_values](#copy_1_of_wipe_association_values)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |acDupe| Assign|‚úÖ|
    |apDupe| Assign|‚úÖ|
    
    
    
    
    ### raise_tpa_contact_dupe_flag
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|raise tpa contact dupe flag|
    |Connector|[Copy_1_of_Wipe_Association_values](#copy_1_of_wipe_association_values)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |acDupe| Assign|‚úÖ|
    
    
    
    
    ### raise_tpa_partner_dupe_flag
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|raise tpa partner dupe flag|
    |Connector|[Copy_1_of_Wipe_Association_values](#copy_1_of_wipe_association_values)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |apDupe| Assign|‚úÖ|
    
    
    
    
    ### Remove_Leftmost_Email
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Remove Leftmost Email|
    |Connector|isGoTo: true<br/>targetReference: Additional_FP_email_parse<br/>|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |emailFieldRaw| Assign|emailFieldLeftmostRemoved|
    
    
    
    
    ### Wipe_AC_Values
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Wipe AC Values|
    |Connector|[Is_TPA_Present](#is_tpa_present)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedContact| Assign|<!-- -->|
    
    
    
    
    ### Wipe_Association_values
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Assignment|
    |Label|Wipe Association values|
    |Connector|[Secondary_Advisor_Check](#secondary_advisor_check)|
    
    
    #### Assignments
    
    |Assign To Reference|Operator|Value|
    |:-- |:--:|:--: |
    |associatedContact| Assign|<!-- -->|
    |associatedPartner| Assign|<!-- -->|
    
    
    
    
    ### Additional_contacts_found_check
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Additional contacts found check|
    |Default Connector|[Is_TPA_Present](#is_tpa_present)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule Additional_advisors_found (Additional advisors found)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Additional_Contact_Loop](#additional_contact_loop)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|[Find_additional_advisor_contacts](#find_additional_advisor_contacts)| Is Empty|‚¨ú|
    
    
    
    
    ### Additional_FP_email_parse
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Additional FP email parse|
    |Description|For splitting apart comma separated emails, if present|
    |Default Connector|[Add_final_email](#add_final_email)|
    |Default Connector Label|Last One|
    
    
    #### Rule Multiple_Remaining_Emails (Multiple Remaining Emails)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Add_email_to_collection](#add_email_to_collection)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|emailFieldRaw| Contains|,|
    
    
    
    
    ### Check_for_referring_contact
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Check for referring contact|
    |Default Connector|[Check_for_referring_partner](#check_for_referring_partner)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule Referring_contact_Present (Referring contact Present)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Assign_referring_contact](#assign_referring_contact)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|leadInput.Associated_Contact__c| Is Null|‚¨ú|
    |2|acDupe| Equal To|‚¨ú|
    
    
    
    
    ### Check_for_referring_partner
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Check for referring partner|
    |Default Connector|[Create_Associated_Contacts](#create_associated_contacts)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule Referring_partner_present (Referring partner present)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Assign_referring_partner](#assign_referring_partner)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|leadInput.Associated_Partner__c| Is Null|‚¨ú|
    |2|apDupe| Equal To|‚¨ú|
    
    
    
    
    ### Check_if_advisor_value_s_match_lead_fields
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Check if advisor value(s) match lead fields|
    |Default Connector|[Wipe_Association_values](#wipe_association_values)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule advisor_contact_and_partner_match (advisor contact and partner match)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Raise_contact_and_partner_dupe_flags](#raise_contact_and_partner_dupe_flags)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|associatedContact.Contact__c| Equal To|leadInput.Associated_Contact__c|
    |2|associatedPartner.Account__c| Equal To|leadInput.Associated_Partner__c|
    
    
    
    
    #### Rule advisor_contact_match (advisor contact match)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Raise_advisor_contact_dupe_flag](#raise_advisor_contact_dupe_flag)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|associatedContact.Contact__c| Equal To|leadInput.Associated_Contact__c|
    
    
    
    
    #### Rule advisor_partner_match (advisor partner match)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Raise_advisor_partner_dupe_flag](#raise_advisor_partner_dupe_flag)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|associatedPartner.Account__c| Equal To|leadInput.Associated_Partner__c|
    
    
    
    
    ### Check_if_tpa_value_s_match_lead_fields
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Check if tpa value(s) match lead fields|
    |Default Connector|[Copy_1_of_Wipe_Association_values](#copy_1_of_wipe_association_values)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule tpa_contact_and_partner_match (tpa contact and partner match)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Raise_tpa_contact_and_partner_dupe_flags](#raise_tpa_contact_and_partner_dupe_flags)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|associatedContact.Contact__c| Equal To|leadInput.Associated_Contact__c|
    |2|associatedPartner.Account__c| Equal To|leadInput.Associated_Partner__c|
    
    
    
    
    #### Rule tpa_contact_match (tpa contact match)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[raise_tpa_contact_dupe_flag](#raise_tpa_contact_dupe_flag)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|associatedContact.Contact__c| Equal To|leadInput.Associated_Contact__c|
    
    
    
    
    #### Rule tpa_partner_match (tpa partner match)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[raise_tpa_partner_dupe_flag](#raise_tpa_partner_dupe_flag)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|associatedPartner.Account__c| Equal To|leadInput.Associated_Partner__c|
    
    
    
    
    ### Contact_role_check
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Contact role check|
    |Default Connector|[Assign_generic_ac_referrer_role](#assign_generic_ac_referrer_role)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule Has_ac_role_on_lead (Has ac role on lead)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Assign_ac_role_from_lead](#assign_ac_role_from_lead)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|leadInput.Associated_Contact_Role__c| Is Blank|‚¨ú|
    
    
    
    
    ### is_Advisor_Present
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|is Advisor Present?|
    |Default Connector|[Is_TPA_Present](#is_tpa_present)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule Advisor_spotted (Advisor spotted)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Assign_advisor_AC_values](#assign_advisor_ac_values)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|proposal.Advisor_Account__c| Is Null|‚¨ú|
    
    
    
    
    ### Is_an_Opp_present
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Is an Opp present?|
    |Default Connector|[Get_Proposal](#get_proposal)|
    |Default Connector Label|Yes|
    
    
    #### Rule No (No)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|leadInput.ConvertedOpportunityId| Is Null|‚úÖ|
    
    
    
    
    ### Is_TPA_Present
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Is TPA Present?|
    |Default Connector|[Proposal_partner_check](#proposal_partner_check)|
    |Default Connector Label|TPA Not Present|
    
    
    #### Rule TPA_Present_Proposal (TPA Present)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Assign_TPA_AC_values](#assign_tpa_ac_values)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|proposal.TPA_Account__c| Is Null|‚¨ú|
    
    
    
    
    ### Partner_Role_Check
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Partner Role Check|
    |Default Connector|[Assign_generic_ap_referrer_role](#assign_generic_ap_referrer_role)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule has_ap_role_on_lead (has ap role on lead)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Assign_ap_role_from_lead](#assign_ap_role_from_lead)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|leadInput.Associated_Partner_Role__c| Is Blank|‚¨ú|
    
    
    
    
    ### Partners_to_create_check
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Partners to create check|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule need_2_create_partners (need 2 create partners)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Create_Associated_Partners](#create_associated_partners)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|apCollection| Is Null|‚¨ú|
    
    
    
    
    ### Proposal_partner_check
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Proposal partner check|
    |Default Connector|[Converted_Contact_AC](#converted_contact_ac)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule Simply_path (Simply path)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Referrer_Type_Validation](#referrer_type_validation)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|proposal.Service_Option__c| Contains|Simply|
    |2|leadInput.Business_Unit__c| Equal To|Simply Retirement|
    
    
    
    
    ### Proposal_Present
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Proposal Present?|
    |Default Connector|[Converted_Contact_AC](#converted_contact_ac)|
    |Default Connector Label|Proposal Not Found|
    
    
    #### Rule Proposal_Found (Proposal Found)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Connect_proposal_to_opp](#connect_proposal_to_opp)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|proposal| Is Null|‚¨ú|
    
    
    
    
    ### Referrer_Type_Validation
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Referrer Type Validation|
    |Default Connector|[LSD_DIR](#lsd_dir)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule Special_Case (Special Case)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[LSD_Value_on_Proposal](#lsd_value_on_proposal)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|proposal.Lead_Source_Detail__c| Is Blank|‚¨ú|
    
    
    
    
    #### Rule TPA_Referred (TPA Referred)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[LSD_TPA](#lsd_tpa)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|proposal.Referrer_Type__c| Equal To|TPA|
    
    
    
    
    #### Rule Advisor_Referred (Advisor Referred)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[LSD_ADV](#lsd_adv)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|proposal.Referrer_Type__c| Equal To|Advisor|
    
    
    
    
    ### Secondary_Advisor_Check
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Decision|
    |Label|Secondary Advisor Check|
    |Description|Uses 'Additional_Financial_Professional_Emails__c' to find related advisors for ACs|
    |Default Connector|[Find_additional_advisor_contacts](#find_additional_advisor_contacts)|
    |Default Connector Label|Default Outcome|
    
    
    #### Rule Additional_FP_emails_present (Additional FP emails present)
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Connector|[Additional_FP_email_parse](#additional_fp_email_parse)|
    |Condition Logic|and|
    
    
    
    
    |Condition Id|Left Value Reference|Operator|Right Value|
    |:-- |:-- |:--:|:--: |
    |1|proposal.Additional_Financial_Professional_Emails__c| Is Blank|‚¨ú|
    
    
    
    
    ### Additional_Contact_Loop
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Loop|
    |Label|Additional Contact Loop|
    |Collection Reference|[Find_additional_advisor_contacts](#find_additional_advisor_contacts)|
    |Iteration Order|Asc|
    |Next Value Connector|[Assign_additional_advisor_AC_values](#assign_additional_advisor_ac_values)|
    |No More Values Connector|[Wipe_AC_Values](#wipe_ac_values)|
    
    
    ### Create_Associated_Contacts
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Record Create|
    |Label|Create Associated Contacts|
    |Input Reference|acCollection|
    |Connector|[Partners_to_create_check](#partners_to_create_check)|
    
    
    ### Create_Associated_Partners
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Record Create|
    |Label|Create Associated Partners|
    |Input Reference|apCollection|
    
    
    ### Find_additional_advisor_contacts
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Record Lookup|
    |Object|Contact|
    |Label|Find additional advisor contacts|
    |Assign Null Values If No Records Found|‚¨ú|
    |Get First Record Only|‚¨ú|
    |Store Output Automatically|‚úÖ|
    |Connector|[Additional_contacts_found_check](#additional_contacts_found_check)|
    
    
    #### Filters (logic: **and**)
    
    |Filter Id|Field|Operator|Value|
    |:-- |:-- |:--:|:--: |
    |1|Email| In|additionalEmailSearchCollection|
    |2|AccountId| Equal To|proposal.Advisor_Account__c|
    
    
    
    
    ### Get_Proposal
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Record Lookup|
    |Object|Proposal__c|
    |Label|Get Proposal|
    |Description|!!! MAYBE INSERT CHECK AFTER THIS TO DETERMINE IF LEAD'S ASSOCIATED CONTACT (referrer) IS ON THE PROPOSAL?<br/><br/>Had a case pop up where a lead was created with one advisor referrer, but closed with a totally different advisor (different firm).|
    |Assign Null Values If No Records Found|‚úÖ|
    |Output Reference|proposal|
    |Queried Fields|- Id<br/>- Auto_Enrollment_Deferral_Escalation_Rate__c<br/>- Auto_Enrollment__c<br/>- Brokerage_Accounts_PCRA__c<br/>- Custodian__c<br/>- Deferral_Change_Frequency__c<br/>- Discretionary_Match_Formula_Notes__c<br/>- Discretionary_Match__c<br/>- Eligibility_Age__c<br/>- Financial_Professional_Fees__c<br/>- Fund_List__c<br/>- Hardships__c<br/>- Loans__c<br/>- Plan_Eligibility__c<br/>- Plan_Entry_Frequency__c<br/>- Plan_Type__c<br/>- Product_Type__c<br/>- Profit_Sharing_Match_Vesting_Schedule__c<br/>- Profit_Sharing__c<br/>- QACA_Safe_Harbor_Vesting_Schedule__c<br/>- Referrer_Type__c<br/>- Roth_Contributions__c<br/>- Safe_Harbor_Match_Determination_Period__c<br/>- Safe_Harbor__c<br/>- Service_Option__c<br/>- TPA_Account__c<br/>- TPA_Contact__c<br/>- X3_38__c<br/>- Advisor_Contact__c<br/>- Advisor_Account__c<br/>- Additional_Financial_Professional_Emails__c<br/>- Lead_Source_Detail__c<br/>|
    |Sort Field|CreatedDate|
    |Sort Order|Desc|
    |Connector|[Proposal_Present](#proposal_present)|
    
    
    #### Filters (logic: **and**)
    
    |Filter Id|Field|Operator|Value|
    |:-- |:-- |:--:|:--: |
    |1|Company_Email__c| Equal To|leadInput.Email|
    |2|Company_Email__c| Is Null|<!-- -->|
    
    
    
    
    ### Update_Opportunity_0_0_0
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Record Update|
    |Object|Opportunity|
    |Label|Update Opportunity|
    |Connector|[Converted_Contact_AC](#converted_contact_ac)|
    
    
    #### Filters (logic: **and**)
    
    |Filter Id|Field|Operator|Value|
    |:-- |:-- |:--:|:--: |
    |1|Id| Equal To|leadInput.ConvertedOpportunityId|
    
    
    
    
    #### Input Assignments
    
    |Field|Value|
    |:-- |:--: |
    |LeadSourceDetail__c|LeadSourceDetail|
    |Service_Option__c|proposal.Service_Option__c|
    |TPA_Account__c|proposal.TPA_Account__r.Name|
    
    
    
    
    ### Update_Proposal
    
    |<!-- -->|<!-- -->|
    |:---|:---|
    |Type|Record Update|
    |Label|Update Proposal|
    |Input Reference|proposal|
    |Connector|[is_Advisor_Present](#is_advisor_present)|
    
    
    
    
    
    
    ___
    
    _Documentation generated from branch monitoring_myubiquity by [sfdx-hardis](https://sfdx-hardis.cloudity.com), featuring [salesforce-flow-visualiser](https://github.com/toddhalfpenny/salesforce-flow-visualiser)_

