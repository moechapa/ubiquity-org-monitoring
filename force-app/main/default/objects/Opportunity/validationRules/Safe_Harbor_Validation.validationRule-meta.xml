<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Safe_Harbor_Validation</fullName>
    <active>true</active>
    <description>Safe Harbor field must be populated to close the opportunity.</description>
    <errorConditionFormula>ISPICKVAL(StageName, &quot;Closed Won&quot;) 
&amp;&amp;
NOT(ISPICKVAL(  Type , &quot;Ancillary Billing Flat Fee&quot;))
&amp;&amp; 
ISPICKVAL( Product_Type__c , &quot;401(k)&quot; ) 
&amp;&amp; 
ISPICKVAL(  Safe_Harbor__c  , &quot;&quot;) 
&amp;&amp;
NOT(ISPICKVAL(   Type , &quot;Ancillary Billing Hourly Rate&quot;)) 
&amp;&amp; 
CloseDate &gt; DATE(2017,1,9)
&amp;&amp;
ISCHANGED(StageName)</errorConditionFormula>
    <errorDisplayField>Safe_Harbor__c</errorDisplayField>
    <errorMessage>Safe Harbor field must be populated to close this opportunity. If the client will not use Safe Harbor please put &quot;None&quot; for entry.</errorMessage>
</ValidationRule>
