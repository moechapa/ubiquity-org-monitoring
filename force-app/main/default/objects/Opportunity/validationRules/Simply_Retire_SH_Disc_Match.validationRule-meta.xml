<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>Simply_Retire_SH_Disc_Match</fullName>
    <active>true</active>
    <description>Simply Retirement requires Safe Harbor Match OR Discretionary Match, but not both.</description>
    <errorConditionFormula>ISPICKVAL(StageName, &quot;Closed Won&quot;) 
&amp;&amp; 
ISPICKVAL(  Service_Option__c  , &quot;Simply Retirement&quot; ) 
&amp;&amp;
 NOT(CONTAINS(RecordType.DeveloperName, &quot;Ancillary&quot;))
&amp;&amp;
(
(

(ISPICKVAL(  Safe_Harbor__c , &quot;None&quot;)
||
ISPICKVAL(  Safe_Harbor__c , &quot;&quot;) 
)
&amp;&amp; 
NOT(ISPICKVAL( Discretionary_Match__c , &quot;Yes&quot;))

)

||

(
NOT(ISPICKVAL(  Safe_Harbor__c , &quot;None&quot;))
&amp;&amp;
NOT(ISPICKVAL(  Safe_Harbor__c , &quot;&quot;))
&amp;&amp; 
NOT(ISPICKVAL( Discretionary_Match__c , &quot;No&quot;))
)
)</errorConditionFormula>
    <errorMessage>For Simply Retirement, if Safe Harbor is used, Discretionary Match must be &quot;No&quot;.   If Safe Harbor is not used, Discretionary Match must be &quot;Yes&quot;</errorMessage>
</ValidationRule>
