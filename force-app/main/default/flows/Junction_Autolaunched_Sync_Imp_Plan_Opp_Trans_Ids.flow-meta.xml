<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>62.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Add_to_AC_update_collection</name>
        <label>Add to AC update collection</label>
        <locationX>547</locationX>
        <locationY>870</locationY>
        <assignmentItems>
            <assignToReference>acNeedingUpdate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Contact_Loop</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Contact_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Add_to_AP_update_collection</name>
        <label>Add to AP update collection</label>
        <locationX>1681</locationX>
        <locationY>846</locationY>
        <assignmentItems>
            <assignToReference>apNeedingUpdate</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Partner_Loop</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Partner_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_new_AC_field_vars</name>
        <label>Assign new AC field vars</label>
        <locationX>549</locationX>
        <locationY>1204</locationY>
        <assignmentItems>
            <assignToReference>Contact_Loop.Implementation__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>implementationId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Contact_Loop.Opportunity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>opportunityId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Contact_Loop.Plan__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>planId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Contact_Loop.Transition__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>transitionId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>needsUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_AC_update_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_new_AP_field_vars</name>
        <label>Assign new AP field vars</label>
        <locationX>1684</locationX>
        <locationY>1231</locationY>
        <assignmentItems>
            <assignToReference>Partner_Loop.Opportunity__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>opportunityId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Partner_Loop.Plan__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>planId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Partner_Loop.Implementation__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>implementationId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Partner_Loop.Transition__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>transitionId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_AP_update_collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Declare_Contact_Record</name>
        <label>Declare Contact Record</label>
        <locationX>639</locationX>
        <locationY>97</locationY>
        <assignmentItems>
            <assignToReference>currentRecordType</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>0.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Contact_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Declare_Partner_Record</name>
        <label>Declare Partner Record</label>
        <locationX>1441</locationX>
        <locationY>103</locationY>
        <assignmentItems>
            <assignToReference>currentRecordType</assignToReference>
            <operator>Assign</operator>
            <value>
                <numberValue>1.0</numberValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Partner_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Contact_Id_Vars</name>
        <label>Set Contact Id Vars</label>
        <locationX>711</locationX>
        <locationY>412</locationY>
        <assignmentItems>
            <assignToReference>planId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contact_Loop.Plan__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>transitionId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contact_Loop.Transition__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>opportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contact_Loop.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>implementationId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Contact_Loop.Implementation__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Opportunity_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Imp_Id</name>
        <label>Set Imp Id</label>
        <locationX>931</locationX>
        <locationY>1037</locationY>
        <assignmentItems>
            <assignToReference>implementationId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>refImplementationId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>needsUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Transition_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Opportunity_Id</name>
        <label>Set Opportunity Id</label>
        <locationX>935</locationX>
        <locationY>574</locationY>
        <assignmentItems>
            <assignToReference>opportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>refOpportunityId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>needsUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Plan_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Partner_Id_Vars</name>
        <label>Set Partner Id Vars</label>
        <locationX>1385</locationX>
        <locationY>419</locationY>
        <assignmentItems>
            <assignToReference>planId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Partner_Loop.Plan__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>transitionId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Partner_Loop.Transition__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>opportunityId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Partner_Loop.Opportunity__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>implementationId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Partner_Loop.Implementation__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Opportunity_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Plan_Id</name>
        <label>Set Plan Id</label>
        <locationX>1236</locationX>
        <locationY>808</locationY>
        <assignmentItems>
            <assignToReference>planId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>refPlanId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>needsUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Imp_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_Transition_Id</name>
        <label>Set Transition Id</label>
        <locationX>1244</locationX>
        <locationY>1244</locationY>
        <assignmentItems>
            <assignToReference>transitionId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>refTransitionId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>needsUpdate</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>What_am_I</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Imp_Check</name>
        <label>Imp Check</label>
        <locationX>1092</locationX>
        <locationY>941</locationY>
        <defaultConnector>
            <targetReference>Transition_Check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Implementation_Needs_Update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>refImplementationId</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>implementationId</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Imp_Id</targetReference>
            </connector>
            <label>Implementation Needs Update</label>
        </rules>
    </decisions>
    <decisions>
        <name>Opportunity_Check</name>
        <label>Opportunity Check</label>
        <locationX>1071</locationX>
        <locationY>435</locationY>
        <defaultConnector>
            <targetReference>Plan_Check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Opportunity_Needs_Update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>refOpportunityId</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>opportunityId</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Opportunity_Id</targetReference>
            </connector>
            <label>Opportunity Needs Update</label>
        </rules>
    </decisions>
    <decisions>
        <name>Partner_vs_Contact_Check</name>
        <label>Partner vs Contact Check</label>
        <locationX>1071</locationX>
        <locationY>244</locationY>
        <defaultConnectorLabel>No inputs</defaultConnectorLabel>
        <rules>
            <name>Associated_Contact</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>associatedContacts</leftValueReference>
                <operator>IsEmpty</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>currentRecordType</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Declare_Contact_Record</targetReference>
            </connector>
            <label>Associated Contact</label>
        </rules>
        <rules>
            <name>Associated_Partner</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>associatedPartners</leftValueReference>
                <operator>IsEmpty</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Declare_Partner_Record</targetReference>
            </connector>
            <label>Associated Partner</label>
        </rules>
    </decisions>
    <decisions>
        <name>Plan_Check</name>
        <label>Plan Check</label>
        <locationX>1087</locationX>
        <locationY>709</locationY>
        <defaultConnector>
            <targetReference>Imp_Check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Plan_Needs_Update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>refPlanId</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>planId</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Plan_Id</targetReference>
            </connector>
            <label>Plan Needs Update</label>
        </rules>
    </decisions>
    <decisions>
        <name>Transition_Check</name>
        <label>Transition Check</label>
        <locationX>1113</locationX>
        <locationY>1148</locationY>
        <defaultConnector>
            <targetReference>What_am_I</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Transition_Needs_Update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>refTransitionId</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>transitionId</leftValueReference>
                <operator>IsBlank</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_Transition_Id</targetReference>
            </connector>
            <label>Transition Needs Update</label>
        </rules>
    </decisions>
    <decisions>
        <name>What_am_I</name>
        <label>What am I</label>
        <locationX>1118</locationX>
        <locationY>1395</locationY>
        <defaultConnector>
            <targetReference>Partner_Loop</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>I am an AP</defaultConnectorLabel>
        <rules>
            <name>I_am_an_AC_needing_update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>currentRecordType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>needsUpdate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_new_AC_field_vars</targetReference>
            </connector>
            <label>I am an AC needing update</label>
        </rules>
        <rules>
            <name>I_am_an_AC</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>currentRecordType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>0.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Contact_Loop</targetReference>
            </connector>
            <label>I am an AC</label>
        </rules>
        <rules>
            <name>I_am_an_AP_needing_update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>needsUpdate</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>currentRecordType</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_new_AP_field_vars</targetReference>
            </connector>
            <label>I am an AP needing update</label>
        </rules>
    </decisions>
    <description>Compares input ACs and/or APs to one or more ref Id inputs.  If a record is missing the corresponding field of an Id input, that Id is assigned to it and it&apos;s added to the outputs.</description>
    <environments>Default</environments>
    <interviewLabel>Junction | Autolaunched | Sync Imp Plan Opp Trans Ids {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Junction | Autolaunched | Sync Imp Plan Opp Trans Ids</label>
    <loops>
        <name>Contact_Loop</name>
        <label>Contact Loop</label>
        <locationX>317</locationX>
        <locationY>334</locationY>
        <collectionReference>associatedContacts</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Set_Contact_Id_Vars</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Partner_vs_Contact_Check</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Partner_Loop</name>
        <label>Partner Loop</label>
        <locationX>1902</locationX>
        <locationY>308</locationY>
        <collectionReference>associatedPartners</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Set_Partner_Id_Vars</targetReference>
        </nextValueConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <start>
        <locationX>959</locationX>
        <locationY>48</locationY>
        <connector>
            <targetReference>Partner_vs_Contact_Check</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <description>Collection of associated contacts that need to be updated</description>
        <name>acNeedingUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>Associated_Contact__c</objectType>
    </variables>
    <variables>
        <name>apNeedingUpdate</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>Associated_Partner__c</objectType>
    </variables>
    <variables>
        <name>associatedContacts</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Associated_Contact__c</objectType>
    </variables>
    <variables>
        <name>associatedPartners</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Associated_Partner__c</objectType>
    </variables>
    <variables>
        <name>currentRecordType</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>implementationId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>needsUpdate</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>opportunityId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>planId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>If an input record is missing an Imp Id, this Id will be assigned to it (unless its null)</description>
        <name>refImplementationId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>If an input record is missing an Opp Id, this Id will be assigned to it (unless its null)</description>
        <name>refOpportunityId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>If an input record is missing an Plan Id, this Id will be assigned to it (unless its null)</description>
        <name>refPlanId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <description>If an input record is missing an Transition Id, this Id will be assigned to it (unless its null)</description>
        <name>refTransitionId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>transitionId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
