<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>56.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>assign_init_to_new_values</name>
        <label>assign init to new values</label>
        <locationX>851</locationX>
        <locationY>3203</locationY>
        <assignmentItems>
            <assignToReference>newAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>initResultAccount</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>planSafeSearch</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>secondPlanSafeSearch</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Case_Cont_and_Acct</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Define_Contact_Count</name>
        <label>Copy 1 of Define Contact Count</label>
        <locationX>1654</locationX>
        <locationY>611</locationY>
        <assignmentItems>
            <assignToReference>contactCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>contactCollection</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Multiple_Email_Contacts_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_Account</name>
        <label>Define Account</label>
        <locationX>1410</locationX>
        <locationY>2069</locationY>
        <assignmentItems>
            <assignToReference>newAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Multi_Contact_Loop.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Contact_Loop_Role_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_Case_Contact</name>
        <label>Define Case Contact</label>
        <locationX>138</locationX>
        <locationY>1961</locationY>
        <assignmentItems>
            <assignToReference>newContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Pull_Single_Contact_From_Collection.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Pull_Single_Contact_From_Collection.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Pull_Single_Contact_From_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_Contact_Count</name>
        <label>Define Contact Count</label>
        <locationX>312</locationX>
        <locationY>911</locationY>
        <assignmentItems>
            <assignToReference>contactCount</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>contactCollection</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Contact_Found_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_Existing_Account</name>
        <label>Define Existing Account</label>
        <locationX>1146</locationX>
        <locationY>2069</locationY>
        <assignmentItems>
            <assignToReference>newAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Contact_Loop_Role_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Used in the case of there being multiple plans but they&apos;re all inactive</description>
        <name>Define_Newest_Inactive_Plan</name>
        <label>Define Newest Inactive Plan</label>
        <locationX>1543</locationX>
        <locationY>4343</locationY>
        <assignmentItems>
            <assignToReference>inactivePlanId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Loop_Through_Plans.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_Through_Plans</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_Phone_Vars_AC</name>
        <label>Define Phone Vars AC</label>
        <locationX>620</locationX>
        <locationY>503</locationY>
        <assignmentItems>
            <assignToReference>standardPhoneNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>standardAnswerConnectPhoneNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>dashifiedPhoneNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>dashifiedAnswerConnectPhone</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>plainPhoneNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>plainAnswerConnectPhoneNumber</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Phone_Number_Validity_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_Phone_Vars_Zoom</name>
        <label>Define Phone Vars Zoom</label>
        <locationX>312</locationX>
        <locationY>503</locationY>
        <assignmentItems>
            <assignToReference>standardPhoneNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>standardZoomPhoneNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>dashifiedPhoneNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>dashifiedZoomPhoneNumber</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>plainPhoneNumber</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>plainZoomPhoneNumber</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Phone_Number_Validity_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_Plan_Count</name>
        <label>Define Plan Count</label>
        <locationX>949</locationX>
        <locationY>3911</locationY>
        <assignmentItems>
            <assignToReference>plansFound</assignToReference>
            <operator>AssignCount</operator>
            <value>
                <elementReference>directPlanCollection</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Plan_Found_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_Searchable_Email</name>
        <label>Define Searchable Email</label>
        <locationX>1630</locationX>
        <locationY>2177</locationY>
        <assignmentItems>
            <assignToReference>searchableEmail</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>embeddedEmailAddress</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Find_Email_Contact</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Record_Initial_Results</name>
        <label>Record Initial Results</label>
        <locationX>926</locationX>
        <locationY>2753</locationY>
        <assignmentItems>
            <assignToReference>initResultAccount</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>newAccountId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newAccountId</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Check_for_potential_secondary_search</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_New_Values</name>
        <label>Set New Values</label>
        <locationX>1588</locationX>
        <locationY>1043</locationY>
        <assignmentItems>
            <assignToReference>newContactId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Multi_Email_Contact_Loop.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newAccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Multi_Email_Contact_Loop.AccountId</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Multi_Email_Contact_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Unsafe_to_search_plan</name>
        <label>Unsafe to search plan</label>
        <locationX>1718</locationX>
        <locationY>2369</locationY>
        <assignmentItems>
            <assignToReference>planSafeSearch</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Multi_Contact_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Unsafe_to_search_second_plan</name>
        <label>Unsafe to search second plan</label>
        <locationX>1454</locationX>
        <locationY>2369</locationY>
        <assignmentItems>
            <assignToReference>secondPlanSafeSearch</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Multi_Contact_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Wipe_Account</name>
        <label>Wipe Account</label>
        <locationX>1850</locationX>
        <locationY>2069</locationY>
        <assignmentItems>
            <assignToReference>newAccountId</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>Contact_Loop_Role_Check</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Wipe_New_Values</name>
        <label>Wipe New Values</label>
        <locationX>1852</locationX>
        <locationY>1043</locationY>
        <assignmentItems>
            <assignToReference>newContactId</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newAccountId</assignToReference>
            <operator>Assign</operator>
        </assignmentItems>
        <connector>
            <targetReference>Multi_Email_Contact_Loop</targetReference>
        </connector>
    </assignments>
    <decisions>
        <description>Was an active plan saved on the case?</description>
        <name>Active_Plan_Stamp_Check</name>
        <label>Active Plan Stamp Check</label>
        <locationX>1191</locationX>
        <locationY>4619</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Needs_Inactive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Stamp_Active_Plan_on_Case</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>inactivePlanId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Stamp_Recent_Inactive_Plan</targetReference>
            </connector>
            <label>Needs Inactive</label>
        </rules>
    </decisions>
    <decisions>
        <description>Is this a zoom voicemail, answer connect voicemail, or an email to case?</description>
        <name>Case_Origin_Check</name>
        <label>Case Origin Check</label>
        <locationX>983</locationX>
        <locationY>395</locationY>
        <defaultConnector>
            <targetReference>Find_Email_Contact</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Zoom_Voicemail</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SuppliedEmail</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>@zoom.us</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Subject</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>New voicemail from</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Define_Phone_Vars_Zoom</targetReference>
            </connector>
            <label>Zoom Voicemail</label>
        </rules>
        <rules>
            <name>Answer_Connect</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.SuppliedEmail</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>@answerconnect</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Define_Phone_Vars_AC</targetReference>
            </connector>
            <label>Answer Connect</label>
        </rules>
    </decisions>
    <decisions>
        <description>Originally added for AnswerConnect cases that could have an email attached in addition to the phone number</description>
        <name>Check_for_potential_secondary_search</name>
        <label>Check for potential secondary search</label>
        <locationX>1916</locationX>
        <locationY>1853</locationY>
        <defaultConnector>
            <targetReference>Check_Init_Result</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>AnswerConnect_Email_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Answer_Connect</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Fetch_Source_Email_AC</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Fetch_Source_Email_AC</targetReference>
            </connector>
            <label>AnswerConnect Email Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Init_Result</name>
        <label>Check Init Result</label>
        <locationX>1916</locationX>
        <locationY>2519</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Init_Found</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>initResultAccount</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>new_vs_init_check</targetReference>
            </connector>
            <label>Init Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_Primary_Email</name>
        <label>Check Primary Email</label>
        <locationX>1852</locationX>
        <locationY>935</locationY>
        <defaultConnector>
            <targetReference>Multi_Email_Contact_Loop</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Primary_Email_Match</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Multi_Email_Contact_Loop.Email</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>searchableEmail</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Set_New_Values</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_New_Values</targetReference>
            </connector>
            <label>Primary Email Match</label>
        </rules>
        <rules>
            <name>Primary_Email_Matched_More_Than_Once</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Multi_Email_Contact_Loop.Email</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>searchableEmail</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Wipe_New_Values</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Wipe_New_Values</targetReference>
            </connector>
            <label>Primary Email Matched More Than Once</label>
        </rules>
    </decisions>
    <decisions>
        <name>Contact_Found_Check</name>
        <label>Contact Found Check</label>
        <locationX>983</locationX>
        <locationY>1745</locationY>
        <defaultConnector>
            <targetReference>Check_for_potential_secondary_search</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Single_Contact_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>contactCount</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Pull_Single_Contact_From_Collection</targetReference>
            </connector>
            <label>Single Contact Found</label>
        </rules>
        <rules>
            <name>Multiple_Contacts_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>contactCount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Multi_Contact_Loop</targetReference>
            </connector>
            <label>Multiple Contacts Found</label>
        </rules>
        <rules>
            <name>Multiple_Contacts_Found_Account_On_Case</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>contactCount</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <label>Multiple Contacts Found, Account On Case</label>
        </rules>
    </decisions>
    <decisions>
        <name>Contact_Loop_Role_Check</name>
        <label>Contact Loop Role Check</label>
        <locationX>1498</locationX>
        <locationY>2261</locationY>
        <defaultConnector>
            <targetReference>Unsafe_to_search_plan</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Current_Role_Ok</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>Multi_Contact_Loop.Role__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Saver</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Multi_Contact_Loop.Role__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Buyer</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Multi_Contact_Loop.Role__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Sponsor</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Multi_Contact_Loop.Role__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Trustee</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Multi_Contact_Loop</targetReference>
            </connector>
            <label>Current Role Ok</label>
        </rules>
        <rules>
            <name>Unsafe_second_attempt</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Worth_Re_attempting</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Unsafe_to_search_second_plan</targetReference>
            </connector>
            <label>Unsafe second attempt</label>
        </rules>
    </decisions>
    <decisions>
        <name>Eligible_for_retry_check</name>
        <label>Eligible for retry check</label>
        <locationX>1058</locationX>
        <locationY>2645</locationY>
        <defaultConnector>
            <targetReference>new_vs_init_check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Worth_Re_attempting</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Find_Phone_Contact</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Find_Email_Contact</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Record_Initial_Results</targetReference>
            </connector>
            <label>Worth Re attempting</label>
        </rules>
    </decisions>
    <decisions>
        <name>Email_Found_Check</name>
        <label>Email Found Check</label>
        <locationX>1762</locationX>
        <locationY>2069</locationY>
        <defaultConnector>
            <targetReference>Check_Init_Result</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Source_Email_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>sourceEmail.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>embeddedEmailAddress</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>embeddedEmailAddress</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>@</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Define_Searchable_Email</targetReference>
            </connector>
            <label>Source Email Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Contact_or_Acct_Missing</name>
        <label>Is Contact or Acct Missing</label>
        <locationX>1757</locationX>
        <locationY>287</locationY>
        <defaultConnector>
            <targetReference>Is_Plan_Missing</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Need_Contact</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.ContactId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.SuppliedEmail</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Case_Origin_Check</targetReference>
            </connector>
            <label>Need Contact</label>
        </rules>
        <rules>
            <name>Need_Account</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.AccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.ContactId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Contact.AccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Case_AccountID</targetReference>
            </connector>
            <label>Need Account</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_Plan_Missing</name>
        <label>Is Plan Missing</label>
        <locationX>1757</locationX>
        <locationY>3587</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Plan_needs_update</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Plan__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.AccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Safe_Plan_Search_Check</targetReference>
            </connector>
            <label>Plan needs update</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_plan_not_Inactive</name>
        <label>Is plan not Inactive</label>
        <locationX>1543</locationX>
        <locationY>4235</locationY>
        <defaultConnector>
            <targetReference>Loop_Through_Plans</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Plan_not_inactive</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Through_Plans.Status__c</leftValueReference>
                <operator>NotEqualTo</operator>
                <rightValue>
                    <stringValue>Inactive</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Stamp_Active_Plan_on_Case</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Stamp_Active_Plan_on_Case</targetReference>
            </connector>
            <label>Plan not inactive</label>
        </rules>
        <rules>
            <name>Newest_Inactive_Plan</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Loop_Through_Plans.Status__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Inactive</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Define_Newest_Inactive_Plan</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Define_Newest_Inactive_Plan</targetReference>
            </connector>
            <label>Newest Inactive Plan</label>
        </rules>
    </decisions>
    <decisions>
        <name>Multiple_Email_Contacts_Check</name>
        <label>Multiple Email Contacts Check</label>
        <locationX>1654</locationX>
        <locationY>719</locationY>
        <defaultConnector>
            <targetReference>Contact_Found_Check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Multi_Email_Contacts_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>contactCount</leftValueReference>
                <operator>GreaterThanOrEqualTo</operator>
                <rightValue>
                    <numberValue>2.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Multi_Email_Contact_Loop</targetReference>
            </connector>
            <label>Multi Email Contacts Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>new_vs_init_check</name>
        <label>new vs init check</label>
        <locationX>983</locationX>
        <locationY>3095</locationY>
        <defaultConnector>
            <targetReference>Update_Case_Cont_and_Acct</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>init_wins</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>newAccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>initResultAccount</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>assign_init_to_new_values</targetReference>
            </connector>
            <label>init wins</label>
        </rules>
    </decisions>
    <decisions>
        <description>Checking to see if the derived phone number is 10 characters long, all integers</description>
        <name>Phone_Number_Validity_Check</name>
        <label>Phone Number Validity Check</label>
        <locationX>312</locationX>
        <locationY>611</locationY>
        <defaultConnector>
            <targetReference>Define_Contact_Count</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Phone_Number_Searchable</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>phoneNumberValid</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Find_Phone_Contact</targetReference>
            </connector>
            <label>Phone Number Searchable</label>
        </rules>
    </decisions>
    <decisions>
        <name>Plan_Found_Check</name>
        <label>Plan Found Check</label>
        <locationX>949</locationX>
        <locationY>4019</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Plan_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>plansFound</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Pull_Single_Plan_From_Collection</targetReference>
            </connector>
            <label>Plan Found</label>
        </rules>
        <rules>
            <name>Multiple_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>plansFound</leftValueReference>
                <operator>GreaterThan</operator>
                <rightValue>
                    <numberValue>1.0</numberValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Loop_Through_Plans</targetReference>
            </connector>
            <label>Multiple Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Primary_Email_Contact_Check</name>
        <label>Primary Email Contact Check</label>
        <locationX>1500</locationX>
        <locationY>1319</locationY>
        <defaultConnector>
            <targetReference>Contact_Found_Check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Set_New_Contact_Values</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>newContactId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>newAccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Update_Case_Cont_and_Acct</targetReference>
            </connector>
            <label>Set New Contact Values</label>
        </rules>
    </decisions>
    <decisions>
        <description>For single contact found, check role.  For multiple, check boolean value from contact loop.</description>
        <name>Safe_Plan_Search_Check</name>
        <label>Safe Plan Search Check</label>
        <locationX>1400</locationX>
        <locationY>3695</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Safe_To_Search_Plan</name>
            <conditionLogic>(1 OR 2 OR 3 OR 4 OR 6) AND 5</conditionLogic>
            <conditions>
                <leftValueReference>$Record.Contact.Role__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Trustee</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Contact.Role__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>buyer</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Contact.Role__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>sponsor</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>$Record.Contact.Role__c</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>Saver</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>planSafeSearch</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Multiple_Contacts_Found</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Find_Contact_s_Plan</targetReference>
            </connector>
            <label>Safe To Search Plan</label>
        </rules>
    </decisions>
    <decisions>
        <name>Set_or_Check_Account</name>
        <label>Set or Check Account</label>
        <locationX>1498</locationX>
        <locationY>1961</locationY>
        <defaultConnector>
            <targetReference>Wipe_Account</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Account_Already_Present</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>$Record.AccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Define_Existing_Account</targetReference>
            </connector>
            <label>Account Already Present</label>
        </rules>
        <rules>
            <name>Not_set</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>newAccountId</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Wipe_Account</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Define_Account</targetReference>
            </connector>
            <label>Not set</label>
        </rules>
        <rules>
            <name>Match</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Multi_Contact_Loop.AccountId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>newAccountId</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Wipe_Account</leftValueReference>
                <operator>WasVisited</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Contact_Loop_Role_Check</targetReference>
            </connector>
            <label>Match</label>
        </rules>
    </decisions>
    <description>Updated to &quot;on create&quot; only for performance reasons

When the contact on a case is changed and the account in null, update the account field with the new contact&apos;s account.</description>
    <environments>Default</environments>
    <formulas>
        <description>xxx-xxx-xxxx</description>
        <name>dashifiedAnswerConnectPhone</name>
        <dataType>String</dataType>
        <expression>MID({!$Record.Description},FIND(&quot;+1 &quot;,{!$Record.Description},30)+3,12)</expression>
    </formulas>
    <formulas>
        <description>xxx-xxx-xxxx</description>
        <name>dashifiedZoomPhoneNumber</name>
        <dataType>String</dataType>
        <expression>MID({!$Record.Subject},FIND(&quot;(&quot;,{!$Record.Subject})+1,3) + &quot;-&quot; +
MID({!$Record.Subject},FIND(&quot;-&quot;,{!$Record.Subject})-3,8)</expression>
    </formulas>
    <formulas>
        <name>embeddedEmailAddress</name>
        <dataType>String</dataType>
        <expression>MID({!sourceEmail.TextBody},FIND(&quot;Email&quot;, {!sourceEmail.TextBody},
FIND(&quot;Call Regarding&quot;, {!sourceEmail.TextBody})
)+7,
(FIND(&quot;Message(If Any)&quot;, {!sourceEmail.TextBody},
FIND(&quot;Email&quot;, {!sourceEmail.TextBody},
FIND(&quot;Call Regarding&quot;, {!sourceEmail.TextBody})))-16) - 
FIND(&quot;Email&quot;, {!sourceEmail.TextBody},
FIND(&quot;Call Regarding&quot;, {!sourceEmail.TextBody}))+7
)</expression>
    </formulas>
    <formulas>
        <name>fiveMinutesAgo</name>
        <dataType>DateTime</dataType>
        <expression>NOW()-(5/60/24)</expression>
    </formulas>
    <formulas>
        <name>phoneNumberValid</name>
        <dataType>Boolean</dataType>
        <expression>ISNUMBER({!plainPhoneNumber}) &amp;&amp; LEN({!plainPhoneNumber})=10</expression>
    </formulas>
    <formulas>
        <description>xxxxxxxxxx</description>
        <name>plainAnswerConnectPhoneNumber</name>
        <dataType>String</dataType>
        <expression>SUBSTITUTE(MID({!$Record.Description},FIND(&quot;+1 &quot;,{!$Record.Description},30)+3,12), &quot;-&quot;, &quot;&quot;)</expression>
    </formulas>
    <formulas>
        <description>xxxxxxxxxx</description>
        <name>plainZoomPhoneNumber</name>
        <dataType>String</dataType>
        <expression>MID({!$Record.Subject},FIND(&quot;(&quot;,{!$Record.Subject})+1,3) +
MID({!$Record.Subject},FIND(&quot;-&quot;,{!$Record.Subject})-3,3) +
MID({!$Record.Subject},FIND(&quot;-&quot;,{!$Record.Subject})+1,4)</expression>
    </formulas>
    <formulas>
        <description>(xxx) xxx-xxxx</description>
        <name>standardAnswerConnectPhoneNumber</name>
        <dataType>String</dataType>
        <expression>&quot;(&quot; + MID({!$Record.Description},FIND(&quot;+1 &quot;,{!$Record.Description},30)+3,3) + &quot;)&quot; + &quot; &quot; + MID({!$Record.Description},FIND(&quot;+1 &quot;,{!$Record.Description},30)+7,8)</expression>
    </formulas>
    <formulas>
        <description>(xxx) xxx-xxxx</description>
        <name>standardZoomPhoneNumber</name>
        <dataType>String</dataType>
        <expression>MID({!$Record.Subject},FIND(&quot;(&quot;,{!$Record.Subject}),14)</expression>
    </formulas>
    <interviewLabel>Case | Before Trigger | Update Account Based on Contact {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Case | Before Trigger | Update Account Based on Contact</label>
    <loops>
        <name>Loop_Through_Plans</name>
        <label>Loop Through Plans</label>
        <locationX>1191</locationX>
        <locationY>4127</locationY>
        <collectionReference>directPlanCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Is_plan_not_Inactive</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Active_Plan_Stamp_Check</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Used to loop through multiple contacts.  Account to match against is defined with first contact, then others are checked to see if they match that account.  Roles are also evaluated to check for possible advisors/tpas</description>
        <name>Multi_Contact_Loop</name>
        <label>Multi Contact Loop</label>
        <locationX>1058</locationX>
        <locationY>1853</locationY>
        <collectionReference>contactCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Set_or_Check_Account</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Eligible_for_retry_check</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>Goal of this loop is to sort through email contacts, and see if there&apos;s only one who&apos;s primary email matches the search term.  Prefer this contact over the others</description>
        <name>Multi_Email_Contact_Loop</name>
        <label>Multi Email Contact Loop</label>
        <locationX>1500</locationX>
        <locationY>827</locationY>
        <collectionReference>contactCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Check_Primary_Email</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Primary_Email_Contact_Check</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Pull_Single_Contact_From_Collection</name>
        <label>Pull Single Contact From Collection</label>
        <locationX>50</locationX>
        <locationY>1853</locationY>
        <collectionReference>contactCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Define_Case_Contact</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>new_vs_init_check</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Pull_Single_Plan_From_Collection</name>
        <label>Pull Single Plan From Collection</label>
        <locationX>311</locationX>
        <locationY>4127</locationY>
        <collectionReference>directPlanCollection</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Stamp_Plan_on_Case</targetReference>
        </nextValueConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Fetch_Source_Email_AC</name>
        <label>Fetch Source Email AC</label>
        <locationX>1762</locationX>
        <locationY>1961</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Email_Found_Check</targetReference>
        </connector>
        <filterLogic>(1 OR 3) AND 2</filterLogic>
        <filters>
            <field>ParentId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>FromAddress</field>
            <operator>Contains</operator>
            <value>
                <stringValue>@answerconnect.com</stringValue>
            </value>
        </filters>
        <filters>
            <field>Subject</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.Subject</elementReference>
            </value>
        </filters>
        <object>EmailMessage</object>
        <outputReference>sourceEmail</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>TextBody</queriedFields>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <description>Sorted by created date in case they have multiple active plans (bad data) so the most recent has precedence.</description>
        <name>Find_Contact_s_Plan</name>
        <label>Find Contact&apos;s Plan</label>
        <locationX>949</locationX>
        <locationY>3803</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Define_Plan_Count</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Account__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>$Record.AccountId</elementReference>
            </value>
        </filters>
        <object>Plan__c</object>
        <outputReference>directPlanCollection</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>Status__c</queriedFields>
        <sortField>CreatedDate</sortField>
        <sortOrder>Desc</sortOrder>
    </recordLookups>
    <recordLookups>
        <name>Find_Email_Contact</name>
        <label>Find Email Contact</label>
        <locationX>1654</locationX>
        <locationY>503</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Copy_1_of_Define_Contact_Count</targetReference>
        </connector>
        <filterLogic>(1 AND 3) OR (2 AND 4)</filterLogic>
        <filters>
            <field>Email</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>searchableEmail</elementReference>
            </value>
        </filters>
        <filters>
            <field>Secondary_Email__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>searchableEmail</elementReference>
            </value>
        </filters>
        <filters>
            <field>Email</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Secondary_Email__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>Contact</object>
        <outputReference>contactCollection</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>Role__c</queriedFields>
        <queriedFields>Email</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Find_Phone_Contact</name>
        <label>Find Phone Contact</label>
        <locationX>180</locationX>
        <locationY>719</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Define_Contact_Count</targetReference>
        </connector>
        <filterLogic>((1 OR 2 OR 3) AND 4) OR ((5 OR 6 OR 7) AND 8) OR ((9 OR 10 OR 11) AND 12)</filterLogic>
        <filters>
            <field>Phone</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>plainPhoneNumber</elementReference>
            </value>
        </filters>
        <filters>
            <field>Phone</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>dashifiedPhoneNumber</elementReference>
            </value>
        </filters>
        <filters>
            <field>Phone</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>standardPhoneNumber</elementReference>
            </value>
        </filters>
        <filters>
            <field>Phone</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>MobilePhone</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>plainPhoneNumber</elementReference>
            </value>
        </filters>
        <filters>
            <field>MobilePhone</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>dashifiedPhoneNumber</elementReference>
            </value>
        </filters>
        <filters>
            <field>MobilePhone</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>standardPhoneNumber</elementReference>
            </value>
        </filters>
        <filters>
            <field>MobilePhone</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Secondary_Phone__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>plainPhoneNumber</elementReference>
            </value>
        </filters>
        <filters>
            <field>Secondary_Phone__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>standardPhoneNumber</elementReference>
            </value>
        </filters>
        <filters>
            <field>Secondary_Phone__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>dashifiedPhoneNumber</elementReference>
            </value>
        </filters>
        <filters>
            <field>Secondary_Phone__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>Contact</object>
        <outputReference>contactCollection</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>AccountId</queriedFields>
        <queriedFields>Role__c</queriedFields>
    </recordLookups>
    <recordUpdates>
        <name>Stamp_Active_Plan_on_Case</name>
        <label>Stamp Active Plan on Case</label>
        <locationX>1279</locationX>
        <locationY>4343</locationY>
        <connector>
            <targetReference>Loop_Through_Plans</targetReference>
        </connector>
        <inputAssignments>
            <field>Plan__c</field>
            <value>
                <elementReference>Loop_Through_Plans.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Stamp_Plan_on_Case</name>
        <label>Stamp Plan on Case</label>
        <locationX>399</locationX>
        <locationY>4235</locationY>
        <connector>
            <targetReference>Pull_Single_Plan_From_Collection</targetReference>
        </connector>
        <inputAssignments>
            <field>Plan__c</field>
            <value>
                <elementReference>Pull_Single_Plan_From_Collection.Id</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Stamp_Recent_Inactive_Plan</name>
        <label>Stamp Recent Inactive Plan</label>
        <locationX>1059</locationX>
        <locationY>4727</locationY>
        <inputAssignments>
            <field>Plan__c</field>
            <value>
                <elementReference>inactivePlanId</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case_AccountID</name>
        <label>Update Case.AccountID</label>
        <locationX>2268</locationX>
        <locationY>395</locationY>
        <connector>
            <targetReference>Is_Plan_Missing</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>$Record.Contact.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Case_Cont_and_Acct</name>
        <label>Update Case Cont and Acct</label>
        <locationX>983</locationX>
        <locationY>3395</locationY>
        <connector>
            <targetReference>Is_Plan_Missing</targetReference>
        </connector>
        <inputAssignments>
            <field>AccountId</field>
            <value>
                <elementReference>newAccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>ContactId</field>
            <value>
                <elementReference>newContactId</elementReference>
            </value>
        </inputAssignments>
        <inputReference>$Record</inputReference>
    </recordUpdates>
    <start>
        <locationX>1631</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Is_Contact_or_Acct_Missing</targetReference>
        </connector>
        <filterLogic>(1 OR 2 OR 3) AND (4 OR 5) AND 6</filterLogic>
        <filters>
            <field>ContactId</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>AccountId</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Plan__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>SuppliedEmail</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>ContactId</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <filters>
            <field>IsClosed</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>Case</object>
        <recordTriggerType>Create</recordTriggerType>
        <triggerType>RecordBeforeSave</triggerType>
    </start>
    <status>Active</status>
    <variables>
        <name>contactCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>contactCount</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>dashifiedPhoneNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>directPlanCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Plan__c</objectType>
    </variables>
    <variables>
        <name>inactivePlanId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>initResultAccount</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>multiContactCounter</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
        <value>
            <numberValue>0.0</numberValue>
        </value>
    </variables>
    <variables>
        <name>newAccountId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>newContactId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>plainPhoneNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>planSafeSearch</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>true</booleanValue>
        </value>
    </variables>
    <variables>
        <name>plansFound</name>
        <dataType>Number</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <scale>0</scale>
    </variables>
    <variables>
        <name>searchableEmail</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <elementReference>$Record.SuppliedEmail</elementReference>
        </value>
    </variables>
    <variables>
        <name>secondPlanSafeSearch</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>true</booleanValue>
        </value>
    </variables>
    <variables>
        <name>sourceEmail</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>EmailMessage</objectType>
    </variables>
    <variables>
        <name>standardPhoneNumber</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
