<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Convert_Lead</name>
        <label>Convert Lead</label>
        <locationX>1434</locationX>
        <locationY>958</locationY>
        <actionName>AutoConvertLeadsNoOpp</actionName>
        <actionType>apex</actionType>
        <connector>
            <targetReference>Get_Account</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>LeadIds</name>
            <value>
                <elementReference>Get_Lead.Id</elementReference>
            </value>
        </inputParameters>
        <nameSegment>AutoConvertLeadsNoOpp</nameSegment>
    </actionCalls>
    <apiVersion>49.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Add_to_Collection</name>
        <label>Add to Collection</label>
        <locationX>2360</locationX>
        <locationY>1533</locationY>
        <assignmentItems>
            <assignToReference>leadCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Lead_Loop</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Lead_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_New_BU</name>
        <label>Assign New BU</label>
        <locationX>1309</locationX>
        <locationY>234</locationY>
        <assignmentItems>
            <assignToReference>Advisor.Business_Unit__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Get_Lead.Business_Unit__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Update_Advisor_0</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_to_Collection</name>
        <label>Assign to Collection</label>
        <locationX>2523</locationX>
        <locationY>1133</locationY>
        <assignmentItems>
            <assignToReference>contactCollection</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Contact_Loop</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Contact_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_to_Existing_Account</name>
        <label>Assign to Existing Account</label>
        <locationX>2349</locationX>
        <locationY>1150</locationY>
        <assignmentItems>
            <assignToReference>Contact_Loop.AccountId</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>existingAccount.Id</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_to_Collection</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Variables</name>
        <label>Assign Variables</label>
        <locationX>2203</locationX>
        <locationY>1619</locationY>
        <assignmentItems>
            <assignToReference>Lead_Loop.Associated_Contact__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>newContact.Id</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Lead_Loop.Associated_Contact_Role__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Financial Advisor</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Lead_Loop.Associated_Partner__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>newContact.AccountId</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>Lead_Loop.Associated_Partner_Role__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Financial Advisory Firm</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Add_to_Collection</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Advisor_Employer_or_TPA</name>
        <label>Advisor, Employer or TPA?</label>
        <locationX>643</locationX>
        <locationY>357</locationY>
        <defaultConnectorLabel>N/A</defaultConnectorLabel>
        <rules>
            <name>AdvisorType</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Lead.Lead_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Advisor</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NPN_Present</targetReference>
            </connector>
            <label>Advisor</label>
        </rules>
        <rules>
            <name>TPA</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Lead.Lead_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>TPA</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>NPN_Present</targetReference>
            </connector>
            <label>TPA</label>
        </rules>
        <rules>
            <name>Employer</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Lead.Lead_Type__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Employer</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Get_Lead.Referrer_s_Email__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Advisor</targetReference>
            </connector>
            <label>Employer</label>
        </rules>
    </decisions>
    <decisions>
        <name>Does_Advisor_Exist</name>
        <label>Does Advisor Exist?</label>
        <locationX>959</locationX>
        <locationY>52</locationY>
        <defaultConnector>
            <targetReference>Get_Advisor_Outside_BU</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesExists</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Advisor.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Lead</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Does_Advisor_Exist_0</name>
        <label>Does Advisor Exist?</label>
        <locationX>1144</locationX>
        <locationY>238</locationY>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesExists_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Advisor.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_New_BU</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Does_Advisor_Exist_0_0</name>
        <label>Does Advisor Exist?</label>
        <locationX>705</locationX>
        <locationY>750</locationY>
        <defaultConnector>
            <targetReference>Get_Advisor_0_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesExists_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Advisor.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Advisor</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Does_Advisor_Exist_0_0_0</name>
        <label>Does Advisor Exist?</label>
        <locationX>1198</locationX>
        <locationY>701</locationY>
        <defaultConnector>
            <targetReference>Convert_Lead</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesExists_0_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Advisor.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Advisor</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
        <rules>
            <name>NoConvert</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Advisor.Email</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <stringValue>mailinator</stringValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Advisor.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <label>Don&apos;t Convert</label>
        </rules>
    </decisions>
    <decisions>
        <name>Does_Advisor_Exist_0_0_0_0</name>
        <label>Does Advisor Exist?</label>
        <locationX>789</locationX>
        <locationY>1013</locationY>
        <defaultConnector>
            <targetReference>NPN_Present_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesExists_0_0_0_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Advisor.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Update_Advisor</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>Existing_Account_Present</name>
        <label>Existing Account Present</label>
        <locationX>1601</locationX>
        <locationY>1131</locationY>
        <defaultConnector>
            <targetReference>Get_New_Contact</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Existing_Account_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>existingAccount.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_New_Account</targetReference>
            </connector>
            <label>Existing Account Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Existing_Account_Present_0</name>
        <label>Existing Account Present</label>
        <locationX>1964</locationX>
        <locationY>965</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>New_Account_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>newAccount.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Contact</targetReference>
            </connector>
            <label>New Account Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Leads_To_Update</name>
        <label>Leads To Update</label>
        <locationX>2064</locationX>
        <locationY>1354</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Leads_Found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>refLeads</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Lead_Loop</targetReference>
            </connector>
            <label>Leads Found</label>
        </rules>
    </decisions>
    <decisions>
        <name>NPN_Present</name>
        <label>NPN Present?</label>
        <locationX>502</locationX>
        <locationY>576</locationY>
        <defaultConnector>
            <targetReference>Get_Advisor_0_0</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesNPN</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Lead.Advisor_NPN__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Advisor_0</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <decisions>
        <name>NPN_Present_0</name>
        <label>NPN Present?</label>
        <locationX>960</locationX>
        <locationY>894</locationY>
        <defaultConnector>
            <targetReference>Convert_Lead</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No</defaultConnectorLabel>
        <rules>
            <name>YesNPN_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Get_Lead.Advisor_NPN__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Get_Advisor_Outside_BU_0</targetReference>
            </connector>
            <label>Yes</label>
        </rules>
    </decisions>
    <description>When a new Simply Lead is created, assess whether to Convert Advisor, or Link Advisor to Employer Lead. Removed NPN Without Advisor email alert from Employer Lead path.</description>
    <environments>Default</environments>
    <formulas>
        <name>addOne</name>
        <dataType>Number</dataType>
        <expression>+ 1</expression>
        <scale>2</scale>
    </formulas>
    <formulas>
        <name>OneMinuteLater</name>
        <dataType>DateTime</dataType>
        <expression>NOW()+ (1/1440)</expression>
    </formulas>
    <formulas>
        <name>today</name>
        <dataType>Date</dataType>
        <expression>TODAY()</expression>
    </formulas>
    <interviewLabel>Map Advisor Based on NPN {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Lead | Process | Link Advisor to Client</label>
    <loops>
        <name>Contact_Loop</name>
        <label>Contact Loop</label>
        <locationX>2344</locationX>
        <locationY>960</locationY>
        <collectionReference>Get_Contact</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_to_Existing_Account</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_Contacts</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Lead_Loop</name>
        <label>Lead Loop</label>
        <locationX>2073</locationX>
        <locationY>1530</locationY>
        <collectionReference>refLeads</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_Variables</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Update_Collection</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordCreates>
        <name>Create_Task_0</name>
        <label>Create Task</label>
        <locationX>1590</locationX>
        <locationY>50</locationY>
        <inputAssignments>
            <field>ActivityDate</field>
            <value>
                <elementReference>today</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>Advisor.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Subject</field>
            <value>
                <stringValue>New Simply Employer Lead - Reach Out to Advisor</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>WhoId</field>
            <value>
                <elementReference>Advisor.Id</elementReference>
            </value>
        </inputAssignments>
        <object>Task</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordCreates>
    <recordDeletes>
        <name>Delete_Duplicate_Advisor_Lead</name>
        <label>Delete Duplicate Advisor Lead</label>
        <locationX>1580</locationX>
        <locationY>598</locationY>
        <inputReference>Get_Lead</inputReference>
    </recordDeletes>
    <recordDeletes>
        <name>Delete_New_Account</name>
        <label>Delete New Account</label>
        <locationX>2185</locationX>
        <locationY>783</locationY>
        <connector>
            <targetReference>Get_New_Contact</targetReference>
        </connector>
        <inputReference>newAccount</inputReference>
    </recordDeletes>
    <recordLookups>
        <name>Get_Account</name>
        <label>Get Account</label>
        <locationX>1368</locationX>
        <locationY>1130</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Existing_Account_Present</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Advisory_Firm__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Business_Unit__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Business_Unit__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>BillingStateCode</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.StateCode</elementReference>
            </value>
        </filters>
        <filters>
            <field>CreatedDate</field>
            <operator>LessThan</operator>
            <value>
                <elementReference>Get_Lead.CreatedDate</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputAssignments>
            <assignToReference>existingAccount.Business_Unit__c</assignToReference>
            <field>Business_Unit__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>existingAccount.Id</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>existingAccount.Name</assignToReference>
            <field>Name</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Advisor</name>
        <label>Get Advisor</label>
        <locationX>804</locationX>
        <locationY>224</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Does_Advisor_Exist</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Business_Unit__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Business_Unit__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Email</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Referrer_s_Email__c</elementReference>
            </value>
        </filters>
        <object>Contact</object>
        <outputAssignments>
            <assignToReference>Advisor.AccountId</assignToReference>
            <field>AccountId</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Business_Unit__c</assignToReference>
            <field>Business_Unit__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Credentialed_Advisor__c</assignToReference>
            <field>Credentialed_Advisor__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Id</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.OwnerId</assignToReference>
            <field>OwnerId</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Advisor_0</name>
        <label>Get Advisor</label>
        <locationX>713</locationX>
        <locationY>569</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Does_Advisor_Exist_0_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Business_Unit__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Business_Unit__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>NPN_Number__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Advisor_NPN__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Email</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Email</elementReference>
            </value>
        </filters>
        <object>Contact</object>
        <outputAssignments>
            <assignToReference>Advisor.Business_Unit__c</assignToReference>
            <field>Business_Unit__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Email</assignToReference>
            <field>Email</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Id</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Advisor_0_0</name>
        <label>Get Advisor</label>
        <locationX>523</locationX>
        <locationY>931</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Does_Advisor_Exist_0_0_0_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Business_Unit__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Business_Unit__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>Email</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Email</elementReference>
            </value>
        </filters>
        <object>Contact</object>
        <outputAssignments>
            <assignToReference>Advisor.Business_Unit__c</assignToReference>
            <field>Business_Unit__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Email</assignToReference>
            <field>Email</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Id</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Advisor_Outside_BU</name>
        <label>Get Advisor Outside BU</label>
        <locationX>966</locationX>
        <locationY>237</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Does_Advisor_Exist_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Email</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Referrer_s_Email__c</elementReference>
            </value>
        </filters>
        <object>Contact</object>
        <outputAssignments>
            <assignToReference>Advisor.AccountId</assignToReference>
            <field>AccountId</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Business_Unit__c</assignToReference>
            <field>Business_Unit__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Credentialed_Advisor__c</assignToReference>
            <field>Credentialed_Advisor__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Id</assignToReference>
            <field>Id</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.OwnerId</assignToReference>
            <field>OwnerId</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Advisor_Outside_BU_0</name>
        <label>Get Advisor Outside BU</label>
        <locationX>906</locationX>
        <locationY>546</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Does_Advisor_Exist_0_0_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>NPN_Number__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Advisor_NPN__c</elementReference>
            </value>
        </filters>
        <object>Contact</object>
        <outputAssignments>
            <assignToReference>Advisor.Business_Unit__c</assignToReference>
            <field>Business_Unit__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>Advisor.Id</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_Contact</name>
        <label>Get Contact</label>
        <locationX>2183</locationX>
        <locationY>960</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Contact_Loop</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>AccountId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>newAccount.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Contact</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Lead</name>
        <label>Get Lead</label>
        <locationX>463</locationX>
        <locationY>363</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Advisor_Employer_or_TPA</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Lead</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_Leads_Missing_Referral_Info</name>
        <label>Get Leads Missing Referral Info</label>
        <locationX>1913</locationX>
        <locationY>1353</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Leads_To_Update</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Referrer_s_Email__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>newContact.Email</elementReference>
            </value>
        </filters>
        <filters>
            <field>Associated_Contact__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Referrer_s_Email__c</field>
            <operator>IsNull</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </filters>
        <object>Lead</object>
        <outputReference>refLeads</outputReference>
        <queriedFields>Id</queriedFields>
    </recordLookups>
    <recordLookups>
        <name>Get_New_Account</name>
        <label>Get New Account</label>
        <locationX>1806</locationX>
        <locationY>963</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Existing_Account_Present_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Name</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>existingAccount.Name</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>NotEqualTo</operator>
            <value>
                <elementReference>existingAccount.Id</elementReference>
            </value>
        </filters>
        <filters>
            <field>Business_Unit__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>existingAccount.Business_Unit__c</elementReference>
            </value>
        </filters>
        <filters>
            <field>CreatedDate</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>today</elementReference>
            </value>
        </filters>
        <object>Account</object>
        <outputAssignments>
            <assignToReference>newAccount.Id</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>Get_New_Contact</name>
        <label>Get New Contact</label>
        <locationX>1766</locationX>
        <locationY>1354</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Get_Leads_Missing_Referral_Info</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Email</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Get_Lead.Email</elementReference>
            </value>
        </filters>
        <filters>
            <field>Role__c</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>Advisor</stringValue>
            </value>
        </filters>
        <object>Contact</object>
        <outputAssignments>
            <assignToReference>newContact.AccountId</assignToReference>
            <field>AccountId</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>newContact.Email</assignToReference>
            <field>Email</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>newContact.Id</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordUpdates>
        <name>Update_Advisor</name>
        <label>Update Advisor</label>
        <locationX>1432</locationX>
        <locationY>598</locationY>
        <connector>
            <targetReference>Delete_Duplicate_Advisor_Lead</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>Advisor.Id</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Business_Unit__c</field>
            <value>
                <elementReference>Get_Lead.Business_Unit__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Email</field>
            <value>
                <elementReference>Get_Lead.Email</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>FirstName</field>
            <value>
                <elementReference>Get_Lead.FirstName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>LastName</field>
            <value>
                <elementReference>Get_Lead.LastName</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MailingCountry</field>
            <value>
                <stringValue>United States</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MailingCountryCode</field>
            <value>
                <stringValue>US</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MailingPostalCode</field>
            <value>
                <elementReference>Get_Lead.PostalCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>MailingStateCode</field>
            <value>
                <elementReference>Get_Lead.StateCode</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>NPN_Number__c</field>
            <value>
                <elementReference>Get_Lead.Advisor_NPN__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Phone</field>
            <value>
                <elementReference>Get_Lead.Phone</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Plan_ID__c</field>
            <value>
                <elementReference>Get_Lead.Plan_ID__c</elementReference>
            </value>
        </inputAssignments>
        <object>Contact</object>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Advisor_0</name>
        <label>Update Advisor</label>
        <locationX>1443</locationX>
        <locationY>235</locationY>
        <connector>
            <targetReference>Update_Lead</targetReference>
        </connector>
        <inputReference>Advisor</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Collection</name>
        <label>Update Collection</label>
        <locationX>2296</locationX>
        <locationY>1355</locationY>
        <inputReference>leadCollection</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Contacts</name>
        <label>Update Contacts</label>
        <locationX>2341</locationX>
        <locationY>783</locationY>
        <connector>
            <targetReference>Delete_New_Account</targetReference>
        </connector>
        <inputReference>contactCollection</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>Update_Lead</name>
        <label>Update Lead</label>
        <locationX>1435</locationX>
        <locationY>51</locationY>
        <connector>
            <targetReference>Create_Task_0</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <inputAssignments>
            <field>Associated_Contact_Role__c</field>
            <value>
                <stringValue>Financial Advisor</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Associated_Contact__c</field>
            <value>
                <elementReference>Advisor.Id</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Associated_Partner_Role__c</field>
            <value>
                <stringValue>Financial Advisory Firm</stringValue>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Associated_Partner__c</field>
            <value>
                <elementReference>Advisor.AccountId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Credentialed_Advisor__c</field>
            <value>
                <elementReference>Advisor.Credentialed_Advisor__c</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>OwnerId</field>
            <value>
                <elementReference>Advisor.OwnerId</elementReference>
            </value>
        </inputAssignments>
        <inputAssignments>
            <field>Status</field>
            <value>
                <stringValue>Assigned</stringValue>
            </value>
        </inputAssignments>
        <object>Lead</object>
    </recordUpdates>
    <start>
        <locationX>50</locationX>
        <locationY>393</locationY>
        <connector>
            <targetReference>Get_Lead</targetReference>
        </connector>
    </start>
    <status>Active</status>
    <variables>
        <name>Advisor</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>contactCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>existingAccount</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>leadCollection</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Lead</objectType>
    </variables>
    <variables>
        <name>newAccount</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Account</objectType>
    </variables>
    <variables>
        <name>newContact</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Contact</objectType>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>refLeads</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Lead</objectType>
    </variables>
</Flow>
