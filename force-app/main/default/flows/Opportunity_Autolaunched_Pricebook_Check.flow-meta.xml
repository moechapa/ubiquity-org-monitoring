<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <apiVersion>60.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>Assign</name>
        <label>Assign</label>
        <locationX>567</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>newPB</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Upgrade_PB_loop</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Upgrade_PB_loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_Associated_Partner_Error_Msg</name>
        <label>Assign Associated Partner Error Msg</label>
        <locationX>3625</locationX>
        <locationY>1598</locationY>
        <assignmentItems>
            <assignToReference>standardErrorMessage</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>customErrorMessage</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Failed to get associated partners - permission issue?</stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Assign_Lead_Source_Detail_Match_True</name>
        <label>Assign Lead Source Detail Match True</label>
        <locationX>3119</locationX>
        <locationY>2354</locationY>
        <assignmentItems>
            <assignToReference>leadSourceDetailMatch</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newPB</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Other_pricebooks</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Other_pricebooks</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_lead_source_match_true</name>
        <label>Assign lead source match true</label>
        <locationX>1755</locationX>
        <locationY>1106</locationY>
        <assignmentItems>
            <assignToReference>leadSourceMatch</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>newPB</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PB_Lead_Source_Loop</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>PB_Lead_Source_Loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_missing_op_ID_message</name>
        <label>Assign missing op ID message</label>
        <locationX>3889</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>customErrorMessage</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>No opportunity ID found</stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Assign_new_PB_from_associated_partner</name>
        <label>Assign new PB from associated partner</label>
        <locationX>1975</locationX>
        <locationY>1922</locationY>
        <assignmentItems>
            <assignToReference>newPB</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Single_partner_PB_loop</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Single_partner_PB_loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_no_pricebooks_found_msg</name>
        <label>Assign no pricebooks found msg</label>
        <locationX>50</locationX>
        <locationY>350</locationY>
        <assignmentItems>
            <assignToReference>customErrorMessage</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>No active pricebooks found</stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <description>Sets output variable that indicates whether a pricebook change is necessary</description>
        <name>Assign_PB_change_variable</name>
        <label>Assign PB change variable</label>
        <locationX>842</locationX>
        <locationY>4016</locationY>
        <assignmentItems>
            <assignToReference>needPriceBookChange</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>needPriceBookChangeCalc</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>New_PB_reason_split</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assign_pricebook_get_error_msg</name>
        <label>Assign pricebook get error msg</label>
        <locationX>4153</locationX>
        <locationY>242</locationY>
        <assignmentItems>
            <assignToReference>standardErrorMessage</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>$Flow.FaultMessage</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>customErrorMessage</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>Failed to get pricebooks - permission issue?</stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Assign_standard_PB</name>
        <label>Assign standard PB</label>
        <locationX>3449</locationX>
        <locationY>3062</locationY>
        <assignmentItems>
            <assignToReference>newPB</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Standard_PB_loop</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Standard_PB_loop</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_6</name>
        <label>Assignment 6</label>
        <locationX>1205</locationX>
        <locationY>458</locationY>
        <assignmentItems>
            <assignToReference>leadSourcePBText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>oldPB.Lead_Sources__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>leadSourceOppText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>oppRecord.LeadSource</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_current_PB_for_lead_source</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Assignment_7</name>
        <label>Assignment 7</label>
        <locationX>1887</locationX>
        <locationY>890</locationY>
        <assignmentItems>
            <assignToReference>leadSourcePBText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>PB_Lead_Source_Loop.Lead_Sources__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_for_PB_lead_source_match</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assign_Lead_Source_Detail_Match_True</name>
        <label>Copy 1 of Assign Lead Source Detail Match True</label>
        <locationX>2415</locationX>
        <locationY>1922</locationY>
        <assignmentItems>
            <assignToReference>leadSourceDetailMatch</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Define_new_PB_as_old_one</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Assign_lead_source_match_true</name>
        <label>Copy 1 of Assign lead source match true</label>
        <locationX>1007</locationX>
        <locationY>674</locationY>
        <assignmentItems>
            <assignToReference>leadSourceMatch</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Define_new_PB_as_old_one</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Copy_1_of_Set_partner_match_to_true</name>
        <label>Copy 1 of Set partner match to true</label>
        <locationX>1535</locationX>
        <locationY>1706</locationY>
        <assignmentItems>
            <assignToReference>partnerMatch</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Define_new_PB_as_old_one</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Define_Lead_Source_Details</name>
        <label>Define Lead Source Details</label>
        <locationX>2591</locationX>
        <locationY>1706</locationY>
        <assignmentItems>
            <assignToReference>leadSourceDetailOppText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>oppRecord.LeadSourceDetail__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>leadSourceDetailPBText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>oldPB.Lead_Source_Details__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Check_for_lead_source_details</targetReference>
        </connector>
    </assignments>
    <assignments>
        <description>Indicates that there was no PB change</description>
        <name>Define_new_PB_as_old_one</name>
        <label>Define new PB as old one</label>
        <locationX>1205</locationX>
        <locationY>3824</locationY>
        <assignmentItems>
            <assignToReference>newPB</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>oldPB</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Assign_PB_change_variable</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Loop_Define_Lead_Source_Details</name>
        <label>Loop Define Lead Source Details</label>
        <locationX>3251</locationX>
        <locationY>2138</locationY>
        <assignmentItems>
            <assignToReference>leadSourceDetailPBText</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>Other_pricebooks.Lead_Source_Details__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>Loop_check_for_lead_source_details</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_partner_match_to_true</name>
        <label>Set partner match to true</label>
        <locationX>1887</locationX>
        <locationY>2114</locationY>
        <assignmentItems>
            <assignToReference>partnerMatch</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_PB_change_variable</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>Set_reason_text_to_lead_source</name>
        <label>Set reason text to lead source</label>
        <locationX>314</locationX>
        <locationY>4232</locationY>
        <assignmentItems>
            <assignToReference>reasonText</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>This is the dedicated pricebook for this lead source, </stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>reasonText</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>leadSourceOppText</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_reason_text_to_lead_source_detail</name>
        <label>Set reason text to lead source detail</label>
        <locationX>578</locationX>
        <locationY>4232</locationY>
        <assignmentItems>
            <assignToReference>reasonText</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>This pricebook matches the opportunity&apos;s lead source detail, </stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>reasonText</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>leadSourceDetailOppText</elementReference>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_reason_text_to_partner_match</name>
        <label>Set reason text to partner match</label>
        <locationX>842</locationX>
        <locationY>4232</locationY>
        <assignmentItems>
            <assignToReference>reasonText</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>The primary partner, </stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>reasonText</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>Check_for_primary_associated_partner_w_pricebook.Account_Name__c</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>reasonText</assignToReference>
            <operator>Add</operator>
            <value>
                <stringValue>, has their own pricebook</stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_reason_text_to_standard</name>
        <label>Set reason text to standard</label>
        <locationX>1370</locationX>
        <locationY>4232</locationY>
        <assignmentItems>
            <assignToReference>reasonText</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>No other criteria met, default to standard</stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <assignments>
        <name>Set_reason_text_to_upgrade</name>
        <label>Set reason text to upgrade</label>
        <locationX>1106</locationX>
        <locationY>4232</locationY>
        <assignmentItems>
            <assignToReference>reasonText</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>All upgrades use the upgrade pricebook</stringValue>
            </value>
        </assignmentItems>
    </assignments>
    <collectionProcessors>
        <name>Filter_Collection_to_Upgrade</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Filter Collection to Upgrade</label>
        <locationX>479</locationX>
        <locationY>458</locationY>
        <assignNextValueToReference>currentItem_Filter_Collection_to_Upgrade</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>activePricebooks</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Filter_Collection_to_Upgrade.Name</leftValueReference>
            <operator>Contains</operator>
            <rightValue>
                <stringValue>Upgrade</stringValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Upgrade_PB_loop</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>Isolate_associated_partner_PB</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Isolate associated partner PB</label>
        <locationX>1887</locationX>
        <locationY>1706</locationY>
        <assignNextValueToReference>currentItem_Isolate_associated_partner_PB</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>activePricebooks</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Isolate_associated_partner_PB.Id</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <elementReference>Check_for_primary_associated_partner_w_pricebook.Account__r.Price_Book__c</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Single_partner_PB_loop</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>Isolate_standard_PB</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Isolate standard PB</label>
        <locationX>3361</locationX>
        <locationY>2846</locationY>
        <assignNextValueToReference>currentItem_Isolate_standard_PB</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>activePricebooks</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Isolate_standard_PB.IsStandard</leftValueReference>
            <operator>EqualTo</operator>
            <rightValue>
                <booleanValue>true</booleanValue>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Standard_PB_loop</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <name>Limit_current_PBs_to_ones_with_lead_source_details</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Limit active PBs to ones with lead source details</label>
        <locationX>3031</locationX>
        <locationY>1922</locationY>
        <assignNextValueToReference>currentItem_Limit_current_PBs_to_ones_with_lead_source_details</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>activePricebooks</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Limit_current_PBs_to_ones_with_lead_source_details.Lead_Source_Details__c</leftValueReference>
            <operator>IsNull</operator>
            <rightValue>
                <booleanValue>false</booleanValue>
            </rightValue>
        </conditions>
        <conditions>
            <leftValueReference>currentItem_Limit_current_PBs_to_ones_with_lead_source_details.Id</leftValueReference>
            <operator>NotEqualTo</operator>
            <rightValue>
                <elementReference>oldPB.Id</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>Other_pricebooks</targetReference>
        </connector>
    </collectionProcessors>
    <collectionProcessors>
        <description>A lot of filtering in this flow.  Apparently this is faster than looping through the entire collection every time.  Seems to work well in my testing.</description>
        <name>Limit_PBs_to_ones_with_lead_sources</name>
        <elementSubtype>FilterCollectionProcessor</elementSubtype>
        <label>Limit PBs to ones with lead sources</label>
        <locationX>1667</locationX>
        <locationY>674</locationY>
        <assignNextValueToReference>currentItem_Limit_PBs_to_ones_with_lead_sources</assignNextValueToReference>
        <collectionProcessorType>FilterCollectionProcessor</collectionProcessorType>
        <collectionReference>activePricebooks</collectionReference>
        <conditionLogic>and</conditionLogic>
        <conditions>
            <leftValueReference>currentItem_Limit_PBs_to_ones_with_lead_sources.Lead_Sources__c</leftValueReference>
            <operator>IsNull</operator>
            <rightValue>
                <booleanValue>false</booleanValue>
            </rightValue>
        </conditions>
        <conditions>
            <leftValueReference>currentItem_Limit_PBs_to_ones_with_lead_sources.Id</leftValueReference>
            <operator>NotEqualTo</operator>
            <rightValue>
                <elementReference>oldPB.Id</elementReference>
            </rightValue>
        </conditions>
        <connector>
            <targetReference>PB_Lead_Source_Loop</targetReference>
        </connector>
    </collectionProcessors>
    <decisions>
        <description>Attempts to match the lead source of opportunity w a lead source in the PB&apos;s multiselect picklist.  Is an exact match thanks to the three formulas used.

For example, if &quot;leadSourceOppText&quot; = &quot;exampleOppSource&quot;, the flow would check to see if the PB lead source field:
Ends with - &quot;;exampleOppSource&quot;
Starts with - &quot;exampleOppSource;&quot;
Contains - &quot;;exampleOppSource;&quot;
Equals - &quot;exampleOppSource&quot;

This ensures only exact matches will return true, whereas a simple &quot;contains&quot; could return a true in the case of:

leadSourceOppText = &quot;exampleOppSource&quot;
PB lead source = &quot;exampleOppSourceBad;exampleOppSourceBad2&quot;</description>
        <name>Check_current_PB_for_lead_source</name>
        <label>Check current PB for lead source</label>
        <locationX>1205</locationX>
        <locationY>566</locationY>
        <defaultConnector>
            <targetReference>Limit_PBs_to_ones_with_lead_sources</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No match</defaultConnectorLabel>
        <rules>
            <name>Lead_Source_Null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>oppRecord.LeadSource</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Check_for_primary_associated_partner_w_pricebook</targetReference>
            </connector>
            <label>Lead Source Null</label>
        </rules>
        <rules>
            <name>Lead_source_match_found_in_current_PB</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>leadSourcePBText</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <elementReference>leadSourceOppTextStartsW</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourcePBText</leftValueReference>
                <operator>EndsWith</operator>
                <rightValue>
                    <elementReference>leadSourceOppTextEndsW</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourcePBText</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>leadSourceOppTextContains</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourcePBText</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>leadSourceOppText</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Assign_lead_source_match_true</targetReference>
            </connector>
            <label>Lead source match found in current PB</label>
        </rules>
    </decisions>
    <decisions>
        <description>Similar formulas used as the lead source check above</description>
        <name>Check_for_lead_source_details</name>
        <label>Check for lead source details</label>
        <locationX>2591</locationX>
        <locationY>1814</locationY>
        <defaultConnector>
            <targetReference>Limit_current_PBs_to_ones_with_lead_source_details</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Lead_source_detail_null</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>oppRecord.LeadSourceDetail__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Is_current_PB_Standard_check</targetReference>
            </connector>
            <label>Lead source detail null</label>
        </rules>
        <rules>
            <name>Current_has_lead_source_detail_match</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>leadSourceDetailPBText</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <elementReference>leadSourceDetailOppTextStartsW</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourceDetailPBText</leftValueReference>
                <operator>EndsWith</operator>
                <rightValue>
                    <elementReference>leadSourceDetailOppTextEndsW</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourceDetailPBText</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>leadSourceDetailOppTextContains</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourceDetailPBText</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>leadSourceDetailOppText</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Assign_Lead_Source_Detail_Match_True</targetReference>
            </connector>
            <label>Current has lead source detail match</label>
        </rules>
    </decisions>
    <decisions>
        <description>Second appearance of this check, but applied to a loop instead of the current PB</description>
        <name>Check_for_PB_lead_source_match</name>
        <label>Check for PB lead source match</label>
        <locationX>1887</locationX>
        <locationY>998</locationY>
        <defaultConnector>
            <targetReference>PB_Lead_Source_Loop</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Lead_source_match_found_new_PB</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>leadSourcePBText</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <elementReference>leadSourceOppTextStartsW</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourcePBText</leftValueReference>
                <operator>EndsWith</operator>
                <rightValue>
                    <elementReference>leadSourceOppTextEndsW</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourcePBText</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>leadSourceOppTextContains</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourcePBText</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>leadSourceOppText</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_lead_source_match_true</targetReference>
            </connector>
            <label>Lead source match found new PB</label>
        </rules>
    </decisions>
    <decisions>
        <description>Does the current primary partner (if one is found) have a pricebook?

No checks for the case of there being multiple primary partners.  Will go with the first one it finds.</description>
        <name>Check_for_primary_partner_pricebook</name>
        <label>Check for primary partner pricebook</label>
        <locationX>2063</locationX>
        <locationY>1598</locationY>
        <defaultConnector>
            <targetReference>Define_Lead_Source_Details</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Dedicated_pricebook_found_matches_current</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Check_for_primary_associated_partner_w_pricebook.Account__r.Price_Book__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>Check_for_primary_associated_partner_w_pricebook.Account__r.Price_Book__c</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>oldPB.Id</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Copy_1_of_Set_partner_match_to_true</targetReference>
            </connector>
            <label>Dedicated pricebook found - matches current</label>
        </rules>
        <rules>
            <name>New_dedicated_price_book_found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>Check_for_primary_associated_partner_w_pricebook.Account__r.Price_Book__c</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Isolate_associated_partner_PB</targetReference>
            </connector>
            <label>New dedicated price book found</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_lead_source_detail_match_resolved</name>
        <label>Check if lead source detail match resolved</label>
        <locationX>3031</locationX>
        <locationY>2630</locationY>
        <defaultConnector>
            <targetReference>Is_current_PB_Standard_check</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No match</defaultConnectorLabel>
        <rules>
            <name>Lead_source_detail_match_w_new</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>leadSourceDetailMatch</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>newPB</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Assign_PB_change_variable</targetReference>
            </connector>
            <label>Lead source detail match w new</label>
        </rules>
    </decisions>
    <decisions>
        <name>Check_if_lead_source_match_resolved</name>
        <label>Check if lead source match resolved</label>
        <locationX>1667</locationX>
        <locationY>1382</locationY>
        <defaultConnector>
            <targetReference>Check_for_primary_associated_partner_w_pricebook</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>No match</defaultConnectorLabel>
        <rules>
            <name>Lead_Source_Match_w_New</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>leadSourceMatch</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>newPB</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <isGoTo>true</isGoTo>
                <targetReference>Assign_PB_change_variable</targetReference>
            </connector>
            <label>Lead Source Match w New</label>
        </rules>
    </decisions>
    <decisions>
        <name>Is_current_PB_Standard_check</name>
        <label>Is current PB Standard check</label>
        <locationX>3229</locationX>
        <locationY>2738</locationY>
        <defaultConnector>
            <targetReference>Isolate_standard_PB</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Already_using_standard</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>oldPB.IsStandard</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Define_new_PB_as_old_one</targetReference>
            </connector>
            <label>Already using standard</label>
        </rules>
    </decisions>
    <decisions>
        <description>Similar formulas used as the lead source check above</description>
        <name>Loop_check_for_lead_source_details</name>
        <label>Loop check for lead source details</label>
        <locationX>3251</locationX>
        <locationY>2246</locationY>
        <defaultConnector>
            <targetReference>Other_pricebooks</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>Copy_1_of_Current_has_lead_source_detail_match</name>
            <conditionLogic>or</conditionLogic>
            <conditions>
                <leftValueReference>leadSourceDetailPBText</leftValueReference>
                <operator>StartsWith</operator>
                <rightValue>
                    <elementReference>leadSourceDetailOppTextStartsW</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourceDetailPBText</leftValueReference>
                <operator>EndsWith</operator>
                <rightValue>
                    <elementReference>leadSourceDetailOppTextEndsW</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourceDetailPBText</leftValueReference>
                <operator>Contains</operator>
                <rightValue>
                    <elementReference>leadSourceDetailOppTextContains</elementReference>
                </rightValue>
            </conditions>
            <conditions>
                <leftValueReference>leadSourceDetailPBText</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>leadSourceDetailOppText</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_Lead_Source_Detail_Match_True</targetReference>
            </connector>
            <label>Copy 1 of Current has lead source detail match</label>
        </rules>
    </decisions>
    <decisions>
        <description>By reading a few boolean variables, determine the reason the PB output is what it is.</description>
        <name>New_PB_reason_split</name>
        <label>New PB reason split</label>
        <locationX>842</locationX>
        <locationY>4124</locationY>
        <defaultConnector>
            <targetReference>Set_reason_text_to_standard</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default to Standard</defaultConnectorLabel>
        <rules>
            <name>Lead_source_match</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>leadSourceMatch</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_reason_text_to_lead_source</targetReference>
            </connector>
            <label>Lead source match</label>
        </rules>
        <rules>
            <name>Lead_source_detail_match</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>leadSourceDetailMatch</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_reason_text_to_lead_source_detail</targetReference>
            </connector>
            <label>Lead source detail match</label>
        </rules>
        <rules>
            <name>Partner_match</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>partnerMatch</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_reason_text_to_partner_match</targetReference>
            </connector>
            <label>Partner match</label>
        </rules>
        <rules>
            <name>Upgrade</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>This_is_an_upgrade_opp</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Set_reason_text_to_upgrade</targetReference>
            </connector>
            <label>Upgrade</label>
        </rules>
    </decisions>
    <decisions>
        <name>Run_Context</name>
        <label>Run Context</label>
        <locationX>1969</locationX>
        <locationY>242</locationY>
        <defaultConnector>
            <targetReference>Assign_missing_op_ID_message</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Missing Opp Id</defaultConnectorLabel>
        <rules>
            <name>No_pricebooks_found</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>activePricebooks</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Assign_no_pricebooks_found_msg</targetReference>
            </connector>
            <label>No pricebooks found</label>
        </rules>
        <rules>
            <name>Proceed_w_run</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>oppRecord.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>false</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Specialized_pricebook_check</targetReference>
            </connector>
            <label>Proceed w run</label>
        </rules>
    </decisions>
    <decisions>
        <description>Basically, is this an upgrade or not.  Could be used for non standard branches in the future.</description>
        <name>Specialized_pricebook_check</name>
        <label>Specialized pricebook check</label>
        <locationX>842</locationX>
        <locationY>350</locationY>
        <defaultConnector>
            <targetReference>Assignment_6</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>This_is_an_upgrade_opp</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>oppRecord.Type</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>Upgrade</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>Filter_Collection_to_Upgrade</targetReference>
            </connector>
            <label>This is an upgrade opp</label>
        </rules>
    </decisions>
    <description>Added null checks for lead source + lead source detail</description>
    <environments>Default</environments>
    <formulas>
        <name>leadSourceDetailOppTextContains</name>
        <dataType>String</dataType>
        <expression>&quot;;&quot; + {!leadSourceDetailOppText} + &quot;;&quot;</expression>
    </formulas>
    <formulas>
        <name>leadSourceDetailOppTextEndsW</name>
        <dataType>String</dataType>
        <expression>&quot;;&quot; + {!leadSourceDetailOppText}</expression>
    </formulas>
    <formulas>
        <name>leadSourceDetailOppTextStartsW</name>
        <dataType>String</dataType>
        <expression>{!leadSourceDetailOppText} + &quot;;&quot;</expression>
    </formulas>
    <formulas>
        <name>leadSourceOppTextContains</name>
        <dataType>String</dataType>
        <expression>&quot;;&quot; + {!leadSourceOppText} + &quot;;&quot;</expression>
    </formulas>
    <formulas>
        <name>leadSourceOppTextEndsW</name>
        <dataType>String</dataType>
        <expression>&quot;;&quot; + {!leadSourceOppText}</expression>
    </formulas>
    <formulas>
        <name>leadSourceOppTextStartsW</name>
        <dataType>String</dataType>
        <expression>{!leadSourceOppText} + &apos;;&apos;</expression>
    </formulas>
    <formulas>
        <name>needPriceBookChangeCalc</name>
        <dataType>Boolean</dataType>
        <expression>({!oldPB.Id} &lt;&gt; {!newPB.Id})</expression>
    </formulas>
    <formulas>
        <description>is null if there&apos;s no old PB, otherwise shows old PB name</description>
        <name>oldPBMessage</name>
        <dataType>String</dataType>
        <expression>&quot;Opportunity&apos;s old PB: &quot; + {!oldPB.Name}</expression>
    </formulas>
    <interviewLabel>Opportunity | Autolaunched | Pricebook Check {!$Flow.CurrentDateTime}</interviewLabel>
    <label>Opportunity | Autolaunched | Pricebook Check</label>
    <loops>
        <name>Other_pricebooks</name>
        <label>Other pricebooks</label>
        <locationX>3031</locationX>
        <locationY>2030</locationY>
        <collectionReference>Limit_current_PBs_to_ones_with_lead_source_details</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Loop_Define_Lead_Source_Details</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Check_if_lead_source_detail_match_resolved</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>PB_Lead_Source_Loop</name>
        <label>PB Lead Source Loop</label>
        <locationX>1667</locationX>
        <locationY>782</locationY>
        <collectionReference>Limit_PBs_to_ones_with_lead_sources</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assignment_7</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Check_if_lead_source_match_resolved</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Single_partner_PB_loop</name>
        <label>Single partner PB loop</label>
        <locationX>1887</locationX>
        <locationY>1814</locationY>
        <collectionReference>Isolate_associated_partner_PB</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_new_PB_from_associated_partner</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Set_partner_match_to_true</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <description>if there&apos;s anything other than one record in here, we have a problem</description>
        <name>Standard_PB_loop</name>
        <label>Standard PB loop</label>
        <locationX>3361</locationX>
        <locationY>2954</locationY>
        <collectionReference>Isolate_standard_PB</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign_standard_PB</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <isGoTo>true</isGoTo>
            <targetReference>Assign_PB_change_variable</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>Upgrade_PB_loop</name>
        <label>Upgrade PB loop</label>
        <locationX>479</locationX>
        <locationY>566</locationY>
        <collectionReference>Filter_Collection_to_Upgrade</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Assign</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>Assign_PB_change_variable</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>AUTO_LAYOUT_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>AutoLaunchedFlow</processType>
    <recordLookups>
        <name>Check_for_primary_associated_partner_w_pricebook</name>
        <label>Check for primary associated partner w pricebook</label>
        <locationX>2063</locationX>
        <locationY>1490</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Check_for_primary_partner_pricebook</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Assign_Associated_Partner_Error_Msg</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Primary_Partner__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>Opportunity__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>oppRecord.Id</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Associated_Partner__c</object>
        <queriedFields>Id</queriedFields>
        <queriedFields>Account__c</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Account_Name__c</queriedFields>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>Get_all_active_pricebooks</name>
        <label>Get all active pricebooks</label>
        <locationX>1969</locationX>
        <locationY>134</locationY>
        <assignNullValuesIfNoRecordsFound>true</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Run_Context</targetReference>
        </connector>
        <faultConnector>
            <targetReference>Assign_pricebook_get_error_msg</targetReference>
        </faultConnector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>IsActive</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <object>Pricebook2</object>
        <outputReference>activePricebooks</outputReference>
        <queriedFields>Id</queriedFields>
        <queriedFields>IsStandard</queriedFields>
        <queriedFields>Name</queriedFields>
        <queriedFields>Partner_Fee__c</queriedFields>
        <queriedFields>Lead_Source_Details__c</queriedFields>
        <queriedFields>Lead_Sources__c</queriedFields>
        <queriedFields>CreatedDate</queriedFields>
    </recordLookups>
    <runInMode>SystemModeWithoutSharing</runInMode>
    <start>
        <locationX>1843</locationX>
        <locationY>0</locationY>
        <connector>
            <targetReference>Get_all_active_pricebooks</targetReference>
        </connector>
    </start>
    <status>Draft</status>
    <textTemplates>
        <description>Summarizes PB calculation</description>
        <name>pricebookOutputMessage</name>
        <isViewedAsPlainText>true</isViewedAsPlainText>
        <text>{!oldPBMessage}
Opportunity&apos;s new pricebook: {!newPB.Name}
Reason: {!reasonText}</text>
    </textTemplates>
    <variables>
        <name>activePricebooks</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Pricebook2</objectType>
    </variables>
    <variables>
        <description>Used for matches to call out the specific value of the match</description>
        <name>contextualName</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>currentItem_Filter_Collection_to_Upgrade</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Pricebook2</objectType>
    </variables>
    <variables>
        <name>currentItem_Isolate_associated_partner_PB</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Pricebook2</objectType>
    </variables>
    <variables>
        <name>currentItem_Isolate_standard_PB</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Pricebook2</objectType>
    </variables>
    <variables>
        <name>currentItem_Limit_current_PBs_to_ones_with_lead_source_details</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Pricebook2</objectType>
    </variables>
    <variables>
        <name>currentItem_Limit_PBs_to_ones_with_lead_sources</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Pricebook2</objectType>
    </variables>
    <variables>
        <name>customErrorMessage</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>leadSourceDetailMatch</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>leadSourceDetailOppText</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>leadSourceDetailPBText</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>leadSourceMatch</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <name>leadSourceOppText</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>leadSourcePBText</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
    <variables>
        <name>needPriceBookChange</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>newPB</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <objectType>Pricebook2</objectType>
    </variables>
    <variables>
        <name>oldPB</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Pricebook2</objectType>
    </variables>
    <variables>
        <name>oppRecord</name>
        <dataType>SObject</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
        <objectType>Opportunity</objectType>
    </variables>
    <variables>
        <name>partnerMatch</name>
        <dataType>Boolean</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <value>
            <booleanValue>false</booleanValue>
        </value>
    </variables>
    <variables>
        <description>Explanation for how the new PB output was reached</description>
        <name>reasonText</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
    </variables>
    <variables>
        <name>standardErrorMessage</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>true</isOutput>
        <value>
            <stringValue></stringValue>
        </value>
    </variables>
</Flow>
